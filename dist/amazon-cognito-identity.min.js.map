{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///amazon-cognito-identity.min.js","webpack:///webpack/bootstrap 16353838a7c8e57b0141","webpack:///./enhance.js","webpack:///external {\"root\":[\"AWSCognito\"],\"commonjs2\":\"aws-sdk\",\"commonjs\":\"aws-sdk\",\"amd\":\"aws-sdk\"}","webpack:///./src/AuthenticationHelper.js","webpack:///./src/CognitoAccessToken.js","webpack:///./src/CognitoIdToken.js","webpack:///./src/CognitoRefreshToken.js","webpack:///./src/CognitoUser.js","webpack:///./src/CognitoUserAttribute.js","webpack:///./src/CognitoUserSession.js","webpack:///./src/DateHelper.js","webpack:///./src/StorageHelper.js","webpack:///external {\"root\":[],\"commonjs2\":\"jsbn\",\"commonjs\":\"jsbn\",\"amd\":\"jsbn\"}","webpack:///./src/AuthenticationDetails.js","webpack:///./src/CognitoUserPool.js","webpack:///./src/index.js"],"names":["root","factory","exports","module","require","define","amd","AmazonCognitoIdentity","AWSCognito","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_11__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","default","defineProperty","value","_src","keys","forEach","enumerable","get","_awsSdk","enhancements","CognitoIdentityServiceProvider","window","crypto","msCrypto","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","configurable","writable","protoProps","staticProps","_jsbn","initN","newPasswordRequiredChallengeUserAttributePrefix","AuthenticationHelper","PoolName","N","BigInteger","g","k","hexHash","toString","smallAValue","generateRandomSmallA","largeAValue","calculateA","infoBits","util","Buffer","poolName","hexRandom","lib","randomBytes","randomBigInt","smallABigInt","mod","randomPassword","SaltToHashDevices","verifierDevices","deviceGroupKey","username","generateRandomString","combinedString","hashedString","hash","padHex","verifierDevicesNotPadded","modPow","a","A","Error","B","UHexHash","finalU","buf","hashHex","sha256","Array","join","hexStr","ikm","salt","prk","hmac","infoBitsUpdate","buffer","concat","String","fromCharCode","slice","password","serverBValue","equals","UValue","calculateU","usernamePassword","usernamePasswordHash","xValue","gModPowXN","intValue2","subtract","multiply","sValue","add","hkdf","computehkdf","bigInt","hashStr","indexOf","CognitoAccessToken","_ref","arguments","undefined","AccessToken","jwtToken","payload","split","expiration","JSON","parse","base64","decode","exp","CognitoIdToken","IdToken","CognitoRefreshToken","RefreshToken","token","_interopRequireDefault","_AuthenticationHelper","_AuthenticationHelper2","_CognitoAccessToken","_CognitoAccessToken2","_CognitoIdToken","_CognitoIdToken2","_CognitoRefreshToken","_CognitoRefreshToken2","_CognitoUserSession","_CognitoUserSession2","_DateHelper","_DateHelper2","_CognitoUserAttribute","_CognitoUserAttribute2","_StorageHelper","_StorageHelper2","CognitoUser","data","Username","Pool","pool","Session","client","signInUserSession","authenticationFlowType","authDetails","callback","_this","authenticationHelper","getUserPoolId","dateHelper","authParameters","deviceKey","DEVICE_KEY","USERNAME","SRP_A","getLargeAValue","CHALLENGE_NAME","makeUnauthenticatedRequest","AuthFlow","ClientId","getClientId","AuthParameters","ClientMetadata","getValidationData","err","onFailure","challengeParameters","ChallengeParameters","USER_ID_FOR_SRP","SRP_B","SALT","getCachedDeviceKeyAndPassword","getPasswordAuthenticationKey","getPassword","dateNow","getNowString","signatureString","SECRET_BLOCK","challengeResponses","PASSWORD_CLAIM_SECRET_BLOCK","TIMESTAMP","PASSWORD_CLAIM_SIGNATURE","respondToAuthChallenge","challenge","challengeCallback","errChallenge","dataChallenge","code","message","toLowerCase","clearCachedDeviceKeyAndPassword","ChallengeName","ChallengeResponses","errAuthenticate","dataAuthenticate","challengeName","userAttributes","rawRequiredAttributes","requiredAttributes","userAttributesPrefix","getNewPasswordRequiredChallengeUserAttributePrefix","substr","newPasswordRequired","authenticateUserInternal","_this2","mfaRequired","customChallenge","getDeviceResponse","getCognitoUserSession","AuthenticationResult","cacheTokens","newDeviceMetadata","NewDeviceMetadata","onSuccess","generateHashDevice","DeviceGroupKey","DeviceKey","deviceSecretVerifierConfig","Salt","getSaltDevices","PasswordVerifier","getVerifierDevices","getRandomPassword","getAccessToken","getJwtToken","DeviceSecretVerifierConfig","DeviceName","navigator","userAgent","errConfirm","dataConfirm","cacheDeviceKeyAndPassword","UserConfirmationNecessary","newPassword","requiredAttributeData","_this3","finalUserAttributes","NEW_PASSWORD","_this4","confirmationCode","forceAliasCreation","ConfirmationCode","ForceAliasCreation","answerChallenge","_this5","ANSWER","_this6","SMS_MFA_CODE","oldUserPassword","newUserPassword","isValid","PreviousPassword","ProposedPassword","mfaOptions","mfaEnabled","DeliveryMedium","AttributeName","push","MFAOptions","_this7","clearCachedTokens","attributes","UserAttributes","userData","attributeList","attribute","Name","Value","userAttribute","UserAttributeNames","keyPrefix","idTokenKey","accessTokenKey","refreshTokenKey","storage","getStorage","getItem","idToken","accessToken","refreshToken","sessionData","cachedSession","getToken","refreshSession","_this8","REFRESH_TOKEN","lastUserKey","deviceKeyKey","authResult","authenticationResult","setItem","getIdToken","getRefreshToken","randomPasswordKey","deviceGroupKeyKey","removeItem","inputVerificationCode","Password","attributeName","Code","_this9","forgetSpecificDevice","result","DeviceRememberedStatus","limit","paginationToken","Limit","PaginationToken","_this10","CognitoUserAttribute","name","stringify","CognitoUserSession","now","Math","floor","Date","getExpiration","monthNames","weekNames","DateHelper","weekDay","getUTCDay","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","year","getUTCFullYear","dataMemory","MemoryStorage","StorageHelper","storageWindow","sessionStorage","exception","AuthenticationDetails","ValidationData","validationData","_CognitoUser","_CognitoUser2","CognitoUserPool","UserPoolId","test","region","userPoolId","clientId","apiVersion","cognitoUser","returnData","user","userConfirmed","UserConfirmed","lastAuthUser","_AuthenticationDetails","_CognitoUserPool"],"mappings":"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","file":"amazon-cognito-identity.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aws-sdk\"), require(\"jsbn\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"aws-sdk\", \"jsbn\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AmazonCognitoIdentity\"] = factory(require(\"aws-sdk\"), require(\"jsbn\"));\n\telse\n\t\troot[\"AmazonCognitoIdentity\"] = factory(root[\"AWSCognito\"], root);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_11__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aws-sdk\"), require(\"jsbn\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"aws-sdk\", \"jsbn\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AmazonCognitoIdentity\"] = factory(require(\"aws-sdk\"), require(\"jsbn\"));\n\telse\n\t\troot[\"AmazonCognitoIdentity\"] = factory(root[\"AWSCognito\"], root);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_11__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _src = __webpack_require__(14);\n\t\n\tObject.keys(_src).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _src[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _awsSdk = __webpack_require__(1);\n\t\n\tvar enhancements = _interopRequireWildcard(_src);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tObject.keys(enhancements).forEach(function (key) {\n\t  _awsSdk.CognitoIdentityServiceProvider[key] = enhancements[key];\n\t});\n\t\n\t// The version of crypto-browserify included by aws-sdk only\n\t// checks for window.crypto, not window.msCrypto as used by\n\t// IE 11 – so we set it explicitly here\n\tif (typeof window !== 'undefined' && !window.crypto && window.msCrypto) {\n\t  window.crypto = window.msCrypto;\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2016 Amazon.com,\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Inc. or its affiliates. All Rights Reserved.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Amazon Software License (the \"License\").\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may not use this file except in compliance with the\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * License. A copy of the License is located at\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://aws.amazon.com/asl/\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or in the \"license\" file accompanying this file. This file is\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * for the specific language governing permissions and\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _awsSdk = __webpack_require__(1);\n\t\n\tvar _jsbn = __webpack_require__(11);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\n\t\n\tvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n\t\n\t/** @class */\n\t\n\tvar AuthenticationHelper = function () {\n\t  /**\r\n\t   * Constructs a new AuthenticationHelper object\r\n\t   * @param {string} PoolName Cognito user pool name.\r\n\t   */\n\t  function AuthenticationHelper(PoolName) {\n\t    _classCallCheck(this, AuthenticationHelper);\n\t\n\t    this.N = new _jsbn.BigInteger(initN, 16);\n\t    this.g = new _jsbn.BigInteger('2');\n\t    this.k = new _jsbn.BigInteger(this.hexHash('00' + this.N.toString(16) + '0' + this.g.toString(16)), 16);\n\t\n\t    this.smallAValue = this.generateRandomSmallA();\n\t    this.largeAValue = this.calculateA(this.smallAValue);\n\t\n\t    this.infoBits = new _awsSdk.util.Buffer('Caldera Derived Key', 'utf8');\n\t\n\t    this.poolName = PoolName;\n\t  }\n\t\n\t  /**\r\n\t   * @returns {BigInteger} small A, a random number\r\n\t   */\n\t\n\t\n\t  _createClass(AuthenticationHelper, [{\n\t    key: 'getSmallAValue',\n\t    value: function getSmallAValue() {\n\t      return this.smallAValue;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {BigInteger} large A, a value generated from small A\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getLargeAValue',\n\t    value: function getLargeAValue() {\n\t      return this.largeAValue;\n\t    }\n\t\n\t    /**\r\n\t     * helper function to generate a random big integer\r\n\t     * @returns {BigInteger} a random value.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'generateRandomSmallA',\n\t    value: function generateRandomSmallA() {\n\t      var hexRandom = _awsSdk.util.crypto.lib.randomBytes(128).toString('hex');\n\t\n\t      var randomBigInt = new _jsbn.BigInteger(hexRandom, 16);\n\t      var smallABigInt = randomBigInt.mod(this.N);\n\t\n\t      return smallABigInt;\n\t    }\n\t\n\t    /**\r\n\t     * helper function to generate a random string\r\n\t     * @returns {string} a random value.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'generateRandomString',\n\t    value: function generateRandomString() {\n\t      return _awsSdk.util.crypto.lib.randomBytes(40).toString('base64');\n\t    }\n\t\n\t    /**\r\n\t     * @returns {string} Generated random value included in password hash.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getRandomPassword',\n\t    value: function getRandomPassword() {\n\t      return this.randomPassword;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {string} Generated random value included in devices hash.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getSaltDevices',\n\t    value: function getSaltDevices() {\n\t      return this.SaltToHashDevices;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {string} Value used to verify devices.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getVerifierDevices',\n\t    value: function getVerifierDevices() {\n\t      return this.verifierDevices;\n\t    }\n\t\n\t    /**\r\n\t     * Generate salts and compute verifier.\r\n\t     * @param {string} deviceGroupKey Devices to generate verifier for.\r\n\t     * @param {string} username User to generate verifier for.\r\n\t     * @returns {void}\r\n\t     */\n\t\n\t  }, {\n\t    key: 'generateHashDevice',\n\t    value: function generateHashDevice(deviceGroupKey, username) {\n\t      this.randomPassword = this.generateRandomString();\n\t      var combinedString = '' + deviceGroupKey + username + ':' + this.randomPassword;\n\t      var hashedString = this.hash(combinedString);\n\t\n\t      var hexRandom = _awsSdk.util.crypto.lib.randomBytes(16).toString('hex');\n\t      this.SaltToHashDevices = this.padHex(new _jsbn.BigInteger(hexRandom, 16));\n\t\n\t      var verifierDevicesNotPadded = this.g.modPow(new _jsbn.BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N);\n\t\n\t      this.verifierDevices = this.padHex(verifierDevicesNotPadded);\n\t    }\n\t\n\t    /**\r\n\t     * Calculate the client's public value A = g^a%N\r\n\t     * with the generated random number a\r\n\t     * @param {BigInteger} a Randomly generated small A.\r\n\t     * @returns {BigInteger} Computed large A.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'calculateA',\n\t    value: function calculateA(a) {\n\t      var A = this.g.modPow(a, this.N);\n\t\n\t      if (A.mod(this.N).toString() === '0') {\n\t        throw new Error('Illegal paramater. A mod N cannot be 0.');\n\t      }\n\t      return A;\n\t    }\n\t\n\t    /**\r\n\t     * Calculate the client's value U which is the hash of A and B\r\n\t     * @param {BigInteger} A Large A value.\r\n\t     * @param {BigInteger} B Server B value.\r\n\t     * @returns {BigInteger} Computed U value.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'calculateU',\n\t    value: function calculateU(A, B) {\n\t      this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n\t      var finalU = new _jsbn.BigInteger(this.UHexHash, 16);\n\t\n\t      return finalU;\n\t    }\n\t\n\t    /**\r\n\t     * Calculate a hash from a bitArray\r\n\t     * @param {Buffer} buf Value to hash.\r\n\t     * @returns {String} Hex-encoded hash.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'hash',\n\t    value: function hash(buf) {\n\t      var hashHex = _awsSdk.util.crypto.sha256(buf, 'hex');\n\t      return new Array(64 - hashHex.length).join('0') + hashHex;\n\t    }\n\t\n\t    /**\r\n\t     * Calculate a hash from a hex string\r\n\t     * @param {String} hexStr Value to hash.\r\n\t     * @returns {String} Hex-encoded hash.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'hexHash',\n\t    value: function hexHash(hexStr) {\n\t      return this.hash(new _awsSdk.util.Buffer(hexStr, 'hex'));\n\t    }\n\t\n\t    /**\r\n\t     * Standard hkdf algorithm\r\n\t     * @param {Buffer} ikm Input key material.\r\n\t     * @param {Buffer} salt Salt value.\r\n\t     * @returns {Buffer} Strong key material.\r\n\t     * @private\r\n\t     */\n\t\n\t  }, {\n\t    key: 'computehkdf',\n\t    value: function computehkdf(ikm, salt) {\n\t      var prk = _awsSdk.util.crypto.hmac(salt, ikm, 'buffer', 'sha256');\n\t      var infoBitsUpdate = _awsSdk.util.buffer.concat([this.infoBits, new _awsSdk.util.Buffer(String.fromCharCode(1), 'utf8')]);\n\t      var hmac = _awsSdk.util.crypto.hmac(prk, infoBitsUpdate, 'buffer', 'sha256');\n\t      return hmac.slice(0, 16);\n\t    }\n\t\n\t    /**\r\n\t     * Calculates the final hkdf based on computed S value, and computed U value and the key\r\n\t     * @param {String} username Username.\r\n\t     * @param {String} password Password.\r\n\t     * @param {BigInteger} serverBValue Server B value.\r\n\t     * @param {BigInteger} salt Generated salt.\r\n\t     * @returns {Buffer} Computed HKDF value.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getPasswordAuthenticationKey',\n\t    value: function getPasswordAuthenticationKey(username, password, serverBValue, salt) {\n\t      if (serverBValue.mod(this.N).equals(new _jsbn.BigInteger('0', 16))) {\n\t        throw new Error('B cannot be zero.');\n\t      }\n\t\n\t      this.UValue = this.calculateU(this.largeAValue, serverBValue);\n\t\n\t      if (this.UValue.equals(new _jsbn.BigInteger('0', 16))) {\n\t        throw new Error('U cannot be zero.');\n\t      }\n\t\n\t      var usernamePassword = '' + this.poolName + username + ':' + password;\n\t      var usernamePasswordHash = this.hash(usernamePassword);\n\t\n\t      var xValue = new _jsbn.BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n\t\n\t      var gModPowXN = this.g.modPow(xValue, this.N);\n\t      var intValue2 = serverBValue.subtract(this.k.multiply(gModPowXN));\n\t      var sValue = intValue2.modPow(this.smallAValue.add(this.UValue.multiply(xValue)), this.N).mod(this.N);\n\t\n\t      var hkdf = this.computehkdf(new _awsSdk.util.Buffer(this.padHex(sValue), 'hex'), new _awsSdk.util.Buffer(this.padHex(this.UHexHash), 'hex'));\n\t\n\t      return hkdf;\n\t    }\n\t\n\t    /**\r\n\t    * Return constant newPasswordRequiredChallengeUserAttributePrefix\r\n\t    * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\r\n\t    */\n\t\n\t  }, {\n\t    key: 'getNewPasswordRequiredChallengeUserAttributePrefix',\n\t    value: function getNewPasswordRequiredChallengeUserAttributePrefix() {\n\t      return newPasswordRequiredChallengeUserAttributePrefix;\n\t    }\n\t\n\t    /**\r\n\t     * Converts a BigInteger (or hex string) to hex format padded with zeroes for hashing\r\n\t     * @param {BigInteger|String} Number or string to pad.\r\n\t     * @returns {String} Padded hex string.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'padHex',\n\t    value: function padHex(bigInt) {\n\t      var hashStr = bigInt.toString(16);\n\t      if (hashStr.length % 2 === 1) {\n\t        hashStr = '0' + hashStr;\n\t      } else if ('89ABCDEFabcdef'.indexOf(hashStr[0]) !== -1) {\n\t        hashStr = '00' + hashStr;\n\t      }\n\t      return hashStr;\n\t    }\n\t  }]);\n\t\n\t  return AuthenticationHelper;\n\t}();\n\t\n\texports.default = AuthenticationHelper;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2016 Amazon.com,\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Inc. or its affiliates. All Rights Reserved.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Amazon Software License (the \"License\").\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may not use this file except in compliance with the\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * License. A copy of the License is located at\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://aws.amazon.com/asl/\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or in the \"license\" file accompanying this file. This file is\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * for the specific language governing permissions and\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _awsSdk = __webpack_require__(1);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/** @class */\n\tvar CognitoAccessToken = function () {\n\t  /**\r\n\t   * Constructs a new CognitoAccessToken object\r\n\t   * @param {string=} AccessToken The JWT access token.\r\n\t   */\n\t  function CognitoAccessToken() {\n\t    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t        AccessToken = _ref.AccessToken;\n\t\n\t    _classCallCheck(this, CognitoAccessToken);\n\t\n\t    // Assign object\n\t    this.jwtToken = AccessToken || '';\n\t  }\n\t\n\t  /**\r\n\t   * @returns {string} the record's token.\r\n\t   */\n\t\n\t\n\t  _createClass(CognitoAccessToken, [{\n\t    key: 'getJwtToken',\n\t    value: function getJwtToken() {\n\t      return this.jwtToken;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {int} the token's expiration (exp member).\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getExpiration',\n\t    value: function getExpiration() {\n\t      var payload = this.jwtToken.split('.')[1];\n\t      var expiration = JSON.parse(_awsSdk.util.base64.decode(payload).toString('utf8'));\n\t      return expiration.exp;\n\t    }\n\t  }]);\n\t\n\t  return CognitoAccessToken;\n\t}();\n\t\n\texports.default = CognitoAccessToken;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2016 Amazon.com,\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Inc. or its affiliates. All Rights Reserved.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Amazon Software License (the \"License\").\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may not use this file except in compliance with the\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * License. A copy of the License is located at\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://aws.amazon.com/asl/\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or in the \"license\" file accompanying this file. This file is\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * for the specific language governing permissions and\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\r\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _awsSdk = __webpack_require__(1);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/** @class */\n\tvar CognitoIdToken = function () {\n\t  /**\r\n\t   * Constructs a new CognitoIdToken object\r\n\t   * @param {string=} IdToken The JWT Id token\r\n\t   */\n\t  function CognitoIdToken() {\n\t    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t        IdToken = _ref.IdToken;\n\t\n\t    _classCallCheck(this, CognitoIdToken);\n\t\n\t    // Assign object\n\t    this.jwtToken = IdToken || '';\n\t  }\n\t\n\t  /**\r\n\t   * @returns {string} the record's token.\r\n\t   */\n\t\n\t\n\t  _createClass(CognitoIdToken, [{\n\t    key: 'getJwtToken',\n\t    value: function getJwtToken() {\n\t      return this.jwtToken;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {int} the token's expiration (exp member).\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getExpiration',\n\t    value: function getExpiration() {\n\t      var payload = this.jwtToken.split('.')[1];\n\t      var expiration = JSON.parse(_awsSdk.util.base64.decode(payload).toString('utf8'));\n\t      return expiration.exp;\n\t    }\n\t  }]);\n\t\n\t  return CognitoIdToken;\n\t}();\n\t\n\texports.default = CognitoIdToken;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\r\n\t * Copyright 2016 Amazon.com,\r\n\t * Inc. or its affiliates. All Rights Reserved.\r\n\t *\r\n\t * Licensed under the Amazon Software License (the \"License\").\r\n\t * You may not use this file except in compliance with the\r\n\t * License. A copy of the License is located at\r\n\t *\r\n\t *     http://aws.amazon.com/asl/\r\n\t *\r\n\t * or in the \"license\" file accompanying this file. This file is\r\n\t * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t * for the specific language governing permissions and\r\n\t * limitations under the License.\r\n\t */\n\t\n\t/** @class */\n\tvar CognitoRefreshToken = function () {\n\t  /**\r\n\t   * Constructs a new CognitoRefreshToken object\r\n\t   * @param {string=} RefreshToken The JWT refresh token.\r\n\t   */\n\t  function CognitoRefreshToken() {\n\t    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t        RefreshToken = _ref.RefreshToken;\n\t\n\t    _classCallCheck(this, CognitoRefreshToken);\n\t\n\t    // Assign object\n\t    this.token = RefreshToken || '';\n\t  }\n\t\n\t  /**\r\n\t   * @returns {string} the record's token.\r\n\t   */\n\t\n\t\n\t  _createClass(CognitoRefreshToken, [{\n\t    key: 'getToken',\n\t    value: function getToken() {\n\t      return this.token;\n\t    }\n\t  }]);\n\t\n\t  return CognitoRefreshToken;\n\t}();\n\t\n\texports.default = CognitoRefreshToken;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2016 Amazon.com,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Inc. or its affiliates. All Rights Reserved.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Amazon Software License (the \"License\").\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may not use this file except in compliance with the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * License. A copy of the License is located at\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://aws.amazon.com/asl/\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or in the \"license\" file accompanying this file. This file is\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * CONDITIONS OF ANY KIND, express or implied. See the License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * for the specific language governing permissions and\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _awsSdk = __webpack_require__(1);\n\t\n\tvar _jsbn = __webpack_require__(11);\n\t\n\tvar _AuthenticationHelper = __webpack_require__(2);\n\t\n\tvar _AuthenticationHelper2 = _interopRequireDefault(_AuthenticationHelper);\n\t\n\tvar _CognitoAccessToken = __webpack_require__(3);\n\t\n\tvar _CognitoAccessToken2 = _interopRequireDefault(_CognitoAccessToken);\n\t\n\tvar _CognitoIdToken = __webpack_require__(4);\n\t\n\tvar _CognitoIdToken2 = _interopRequireDefault(_CognitoIdToken);\n\t\n\tvar _CognitoRefreshToken = __webpack_require__(5);\n\t\n\tvar _CognitoRefreshToken2 = _interopRequireDefault(_CognitoRefreshToken);\n\t\n\tvar _CognitoUserSession = __webpack_require__(8);\n\t\n\tvar _CognitoUserSession2 = _interopRequireDefault(_CognitoUserSession);\n\t\n\tvar _DateHelper = __webpack_require__(9);\n\t\n\tvar _DateHelper2 = _interopRequireDefault(_DateHelper);\n\t\n\tvar _CognitoUserAttribute = __webpack_require__(7);\n\t\n\tvar _CognitoUserAttribute2 = _interopRequireDefault(_CognitoUserAttribute);\n\t\n\tvar _StorageHelper = __webpack_require__(10);\n\t\n\tvar _StorageHelper2 = _interopRequireDefault(_StorageHelper);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * @callback nodeCallback\n\t * @template T result\n\t * @param {*} err The operation failure reason, or null.\n\t * @param {T} result The operation result.\n\t */\n\t\n\t/**\n\t * @callback onFailure\n\t * @param {*} err Failure reason.\n\t */\n\t\n\t/**\n\t * @callback onSuccess\n\t * @template T result\n\t * @param {T} result The operation result.\n\t */\n\t\n\t/**\n\t * @callback mfaRequired\n\t * @param {*} details MFA challenge details.\n\t */\n\t\n\t/**\n\t * @callback customChallenge\n\t * @param {*} details Custom challenge details.\n\t */\n\t\n\t/**\n\t * @callback inputVerificationCode\n\t * @param {*} data Server response.\n\t */\n\t\n\t/**\n\t * @callback authSuccess\n\t * @param {CognitoUserSession} session The new session.\n\t * @param {bool=} userConfirmationNecessary User must be confirmed.\n\t */\n\t\n\t/** @class */\n\tvar CognitoUser = function () {\n\t  /**\n\t   * Constructs a new CognitoUser object\n\t   * @param {object} data Creation options\n\t   * @param {string} data.Username The user's username.\n\t   * @param {CognitoUserPool} data.Pool Pool containing the user.\n\t   */\n\t  function CognitoUser(data) {\n\t    _classCallCheck(this, CognitoUser);\n\t\n\t    if (data == null || data.Username == null || data.Pool == null) {\n\t      throw new Error('Username and pool information are required.');\n\t    }\n\t\n\t    this.username = data.Username || '';\n\t    this.pool = data.Pool;\n\t    this.Session = null;\n\t\n\t    this.client = data.Pool.client;\n\t\n\t    this.signInUserSession = null;\n\t    this.authenticationFlowType = 'USER_SRP_AUTH';\n\t  }\n\t\n\t  /**\n\t   * @returns {CognitoUserSession} the current session for this user\n\t   */\n\t\n\t\n\t  _createClass(CognitoUser, [{\n\t    key: 'getSignInUserSession',\n\t    value: function getSignInUserSession() {\n\t      return this.signInUserSession;\n\t    }\n\t\n\t    /**\n\t     * @returns {string} the user's username\n\t     */\n\t\n\t  }, {\n\t    key: 'getUsername',\n\t    value: function getUsername() {\n\t      return this.username;\n\t    }\n\t\n\t    /**\n\t     * @returns {String} the authentication flow type\n\t     */\n\t\n\t  }, {\n\t    key: 'getAuthenticationFlowType',\n\t    value: function getAuthenticationFlowType() {\n\t      return this.authenticationFlowType;\n\t    }\n\t\n\t    /**\n\t     * sets authentication flow type\n\t     * @param {string} authenticationFlowType New value.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'setAuthenticationFlowType',\n\t    value: function setAuthenticationFlowType(authenticationFlowType) {\n\t      this.authenticationFlowType = authenticationFlowType;\n\t    }\n\t\n\t    /**\n\t     * This is used for authenticating the user. it calls the AuthenticationHelper for SRP related\n\t     * stuff\n\t     * @param {AuthenticationDetails} authDetails Contains the authentication data\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {newPasswordRequired} callback.newPasswordRequired new\n\t     *        password and any required attributes are required to continue\n\t     * @param {mfaRequired} callback.mfaRequired MFA code\n\t     *        required to continue.\n\t     * @param {customChallenge} callback.customChallenge Custom challenge\n\t     *        response required to continue.\n\t     * @param {authSuccess} callback.onSuccess Called on success with the new session.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'authenticateUser',\n\t    value: function authenticateUser(authDetails, callback) {\n\t      var _this = this;\n\t\n\t      var authenticationHelper = new _AuthenticationHelper2.default(this.pool.getUserPoolId().split('_')[1]);\n\t      var dateHelper = new _DateHelper2.default();\n\t\n\t      var serverBValue = void 0;\n\t      var salt = void 0;\n\t      var authParameters = {};\n\t\n\t      if (this.deviceKey != null) {\n\t        authParameters.DEVICE_KEY = this.deviceKey;\n\t      }\n\t\n\t      authParameters.USERNAME = this.username;\n\t      authParameters.SRP_A = authenticationHelper.getLargeAValue().toString(16);\n\t\n\t      if (this.authenticationFlowType === 'CUSTOM_AUTH') {\n\t        authParameters.CHALLENGE_NAME = 'SRP_A';\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('initiateAuth', {\n\t        AuthFlow: this.authenticationFlowType,\n\t        ClientId: this.pool.getClientId(),\n\t        AuthParameters: authParameters,\n\t        ClientMetadata: authDetails.getValidationData()\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t\n\t        var challengeParameters = data.ChallengeParameters;\n\t\n\t        _this.username = challengeParameters.USER_ID_FOR_SRP;\n\t        serverBValue = new _jsbn.BigInteger(challengeParameters.SRP_B, 16);\n\t        salt = new _jsbn.BigInteger(challengeParameters.SALT, 16);\n\t        _this.getCachedDeviceKeyAndPassword();\n\t\n\t        var hkdf = authenticationHelper.getPasswordAuthenticationKey(_this.username, authDetails.getPassword(), serverBValue, salt);\n\t\n\t        var dateNow = dateHelper.getNowString();\n\t\n\t        var signatureString = _awsSdk.util.crypto.hmac(hkdf, _awsSdk.util.buffer.concat([new _awsSdk.util.Buffer(_this.pool.getUserPoolId().split('_')[1], 'utf8'), new _awsSdk.util.Buffer(_this.username, 'utf8'), new _awsSdk.util.Buffer(challengeParameters.SECRET_BLOCK, 'base64'), new _awsSdk.util.Buffer(dateNow, 'utf8')]), 'base64', 'sha256');\n\t\n\t        var challengeResponses = {};\n\t\n\t        challengeResponses.USERNAME = _this.username;\n\t        challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n\t        challengeResponses.TIMESTAMP = dateNow;\n\t        challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n\t\n\t        if (_this.deviceKey != null) {\n\t          challengeResponses.DEVICE_KEY = _this.deviceKey;\n\t        }\n\t\n\t        var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n\t          return _this.client.makeUnauthenticatedRequest('respondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n\t            if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n\t              challengeResponses.DEVICE_KEY = null;\n\t              _this.deviceKey = null;\n\t              _this.randomPassword = null;\n\t              _this.deviceGroupKey = null;\n\t              _this.clearCachedDeviceKeyAndPassword();\n\t              return respondToAuthChallenge(challenge, challengeCallback);\n\t            }\n\t            return challengeCallback(errChallenge, dataChallenge);\n\t          });\n\t        };\n\t\n\t        respondToAuthChallenge({\n\t          ChallengeName: 'PASSWORD_VERIFIER',\n\t          ClientId: _this.pool.getClientId(),\n\t          ChallengeResponses: challengeResponses,\n\t          Session: data.Session\n\t        }, function (errAuthenticate, dataAuthenticate) {\n\t          if (errAuthenticate) {\n\t            return callback.onFailure(errAuthenticate);\n\t          }\n\t\n\t          var challengeName = dataAuthenticate.ChallengeName;\n\t          if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n\t            _this.Session = dataAuthenticate.Session;\n\t            var userAttributes = null;\n\t            var rawRequiredAttributes = null;\n\t            var requiredAttributes = [];\n\t            var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n\t\n\t            if (dataAuthenticate.ChallengeParameters) {\n\t              userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n\t              rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n\t            }\n\t\n\t            if (rawRequiredAttributes) {\n\t              for (var i = 0; i < rawRequiredAttributes.length; i++) {\n\t                requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n\t              }\n\t            }\n\t            return callback.newPasswordRequired(userAttributes, requiredAttributes);\n\t          }\n\t          return _this.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n\t        });\n\t        return undefined;\n\t      });\n\t    }\n\t\n\t    /**\n\t    * PRIVATE ONLY: This is an internal only method and should not\n\t    * be directly called by the consumers.\n\t    * @param {object} dataAuthenticate authentication data\n\t    * @param {object} authenticationHelper helper created\n\t    * @param {callback} callback passed on from caller\n\t    * @returns {void}\n\t    */\n\t\n\t  }, {\n\t    key: 'authenticateUserInternal',\n\t    value: function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n\t      var _this2 = this;\n\t\n\t      var challengeName = dataAuthenticate.ChallengeName;\n\t      var challengeParameters = dataAuthenticate.ChallengeParameters;\n\t\n\t      if (challengeName === 'SMS_MFA') {\n\t        this.Session = dataAuthenticate.Session;\n\t        return callback.mfaRequired(challengeName, challengeParameters);\n\t      }\n\t\n\t      if (challengeName === 'CUSTOM_CHALLENGE') {\n\t        this.Session = dataAuthenticate.Session;\n\t        return callback.customChallenge(challengeParameters);\n\t      }\n\t\n\t      if (challengeName === 'DEVICE_SRP_AUTH') {\n\t        this.getDeviceResponse(callback);\n\t        return undefined;\n\t      }\n\t\n\t      this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n\t      this.cacheTokens();\n\t\n\t      var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n\t      if (newDeviceMetadata == null) {\n\t        return callback.onSuccess(this.signInUserSession);\n\t      }\n\t\n\t      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey);\n\t\n\t      var deviceSecretVerifierConfig = {\n\t        Salt: new _awsSdk.util.Buffer(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n\t        PasswordVerifier: new _awsSdk.util.Buffer(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n\t      };\n\t\n\t      this.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n\t      this.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n\t      this.randomPassword = authenticationHelper.getRandomPassword();\n\t\n\t      this.client.makeUnauthenticatedRequest('confirmDevice', {\n\t        DeviceKey: newDeviceMetadata.DeviceKey,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n\t        DeviceName: navigator.userAgent\n\t      }, function (errConfirm, dataConfirm) {\n\t        if (errConfirm) {\n\t          return callback.onFailure(errConfirm);\n\t        }\n\t\n\t        _this2.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n\t        _this2.cacheDeviceKeyAndPassword();\n\t        if (dataConfirm.UserConfirmationNecessary === true) {\n\t          return callback.onSuccess(_this2.signInUserSession, dataConfirm.UserConfirmationNecessary);\n\t        }\n\t        return callback.onSuccess(_this2.signInUserSession);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t    * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n\t    * Pass the new password with any new user attributes to be updated.\n\t    * User attribute keys must be of format userAttributes.<attribute_name>.\n\t    * @param {string} newPassword new password for this user\n\t    * @param {object} requiredAttributeData map with values for all required attributes\n\t    * @param {object} callback Result callback map.\n\t    * @param {onFailure} callback.onFailure Called on any error.\n\t    * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n\t    * @param {customChallenge} callback.customChallenge Custom challenge\n\t    *         response required to continue.\n\t    * @param {authSuccess} callback.onSuccess Called on success with the new session.\n\t    * @returns {void}\n\t    */\n\t\n\t  }, {\n\t    key: 'completeNewPasswordChallenge',\n\t    value: function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback) {\n\t      var _this3 = this;\n\t\n\t      if (!newPassword) {\n\t        return callback.onFailure(new Error('New password is required.'));\n\t      }\n\t      var authenticationHelper = new _AuthenticationHelper2.default(this.pool.getUserPoolId().split('_')[1]);\n\t      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n\t\n\t      var finalUserAttributes = {};\n\t      if (requiredAttributeData) {\n\t        Object.keys(requiredAttributeData).forEach(function (key) {\n\t          finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n\t        });\n\t      }\n\t\n\t      finalUserAttributes.NEW_PASSWORD = newPassword;\n\t      finalUserAttributes.USERNAME = this.username;\n\t      this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n\t        ChallengeName: 'NEW_PASSWORD_REQUIRED',\n\t        ClientId: this.pool.getClientId(),\n\t        ChallengeResponses: finalUserAttributes,\n\t        Session: this.Session\n\t      }, function (errAuthenticate, dataAuthenticate) {\n\t        if (errAuthenticate) {\n\t          return callback.onFailure(errAuthenticate);\n\t        }\n\t        return _this3.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to get a session using device authentication. It is called at the end of user\n\t     * authentication\n\t     *\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {authSuccess} callback.onSuccess Called on success with the new session.\n\t     * @returns {void}\n\t     * @private\n\t     */\n\t\n\t  }, {\n\t    key: 'getDeviceResponse',\n\t    value: function getDeviceResponse(callback) {\n\t      var _this4 = this;\n\t\n\t      var authenticationHelper = new _AuthenticationHelper2.default(this.deviceGroupKey);\n\t      var dateHelper = new _DateHelper2.default();\n\t\n\t      var authParameters = {};\n\t\n\t      authParameters.USERNAME = this.username;\n\t      authParameters.DEVICE_KEY = this.deviceKey;\n\t      authParameters.SRP_A = authenticationHelper.getLargeAValue().toString(16);\n\t\n\t      this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n\t        ChallengeName: 'DEVICE_SRP_AUTH',\n\t        ClientId: this.pool.getClientId(),\n\t        ChallengeResponses: authParameters\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t\n\t        var challengeParameters = data.ChallengeParameters;\n\t\n\t        var serverBValue = new _jsbn.BigInteger(challengeParameters.SRP_B, 16);\n\t        var salt = new _jsbn.BigInteger(challengeParameters.SALT, 16);\n\t\n\t        var hkdf = authenticationHelper.getPasswordAuthenticationKey(_this4.deviceKey, _this4.randomPassword, serverBValue, salt);\n\t\n\t        var dateNow = dateHelper.getNowString();\n\t\n\t        var signatureString = _awsSdk.util.crypto.hmac(hkdf, _awsSdk.util.buffer.concat([new _awsSdk.util.Buffer(_this4.deviceGroupKey, 'utf8'), new _awsSdk.util.Buffer(_this4.deviceKey, 'utf8'), new _awsSdk.util.Buffer(challengeParameters.SECRET_BLOCK, 'base64'), new _awsSdk.util.Buffer(dateNow, 'utf8')]), 'base64', 'sha256');\n\t\n\t        var challengeResponses = {};\n\t\n\t        challengeResponses.USERNAME = _this4.username;\n\t        challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n\t        challengeResponses.TIMESTAMP = dateNow;\n\t        challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n\t        challengeResponses.DEVICE_KEY = _this4.deviceKey;\n\t\n\t        _this4.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n\t          ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n\t          ClientId: _this4.pool.getClientId(),\n\t          ChallengeResponses: challengeResponses,\n\t          Session: data.Session\n\t        }, function (errAuthenticate, dataAuthenticate) {\n\t          if (errAuthenticate) {\n\t            return callback.onFailure(errAuthenticate);\n\t          }\n\t\n\t          _this4.signInUserSession = _this4.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n\t          _this4.cacheTokens();\n\t\n\t          return callback.onSuccess(_this4.signInUserSession);\n\t        });\n\t        return undefined;\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used for a certain user to confirm the registration by using a confirmation code\n\t     * @param {string} confirmationCode Code entered by user.\n\t     * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'confirmRegistration',\n\t    value: function confirmRegistration(confirmationCode, forceAliasCreation, callback) {\n\t      this.client.makeUnauthenticatedRequest('confirmSignUp', {\n\t        ClientId: this.pool.getClientId(),\n\t        ConfirmationCode: confirmationCode,\n\t        Username: this.username,\n\t        ForceAliasCreation: forceAliasCreation\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used by the user once he has the responses to a custom challenge\n\t     * @param {string} answerChallenge The custom challange answer.\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {customChallenge} callback.customChallenge\n\t     *    Custom challenge response required to continue.\n\t     * @param {authSuccess} callback.onSuccess Called on success with the new session.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'sendCustomChallengeAnswer',\n\t    value: function sendCustomChallengeAnswer(answerChallenge, callback) {\n\t      var _this5 = this;\n\t\n\t      var challengeResponses = {};\n\t      challengeResponses.USERNAME = this.username;\n\t      challengeResponses.ANSWER = answerChallenge;\n\t\n\t      this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n\t        ChallengeName: 'CUSTOM_CHALLENGE',\n\t        ChallengeResponses: challengeResponses,\n\t        ClientId: this.pool.getClientId(),\n\t        Session: this.Session\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t\n\t        var challengeName = data.ChallengeName;\n\t\n\t        if (challengeName === 'CUSTOM_CHALLENGE') {\n\t          _this5.Session = data.Session;\n\t          return callback.customChallenge(data.ChallengeParameters);\n\t        }\n\t\n\t        _this5.signInUserSession = _this5.getCognitoUserSession(data.AuthenticationResult);\n\t        _this5.cacheTokens();\n\t        return callback.onSuccess(_this5.signInUserSession);\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used by the user once he has an MFA code\n\t     * @param {string} confirmationCode The MFA code entered by the user.\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {authSuccess} callback.onSuccess Called on success with the new session.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'sendMFACode',\n\t    value: function sendMFACode(confirmationCode, callback) {\n\t      var _this6 = this;\n\t\n\t      var challengeResponses = {};\n\t      challengeResponses.USERNAME = this.username;\n\t      challengeResponses.SMS_MFA_CODE = confirmationCode;\n\t\n\t      if (this.deviceKey != null) {\n\t        challengeResponses.DEVICE_KEY = this.deviceKey;\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n\t        ChallengeName: 'SMS_MFA',\n\t        ChallengeResponses: challengeResponses,\n\t        ClientId: this.pool.getClientId(),\n\t        Session: this.Session\n\t      }, function (err, dataAuthenticate) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t\n\t        var challengeName = dataAuthenticate.ChallengeName;\n\t\n\t        if (challengeName === 'DEVICE_SRP_AUTH') {\n\t          _this6.getDeviceResponse(callback);\n\t          return undefined;\n\t        }\n\t\n\t        _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n\t        _this6.cacheTokens();\n\t\n\t        if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n\t          return callback.onSuccess(_this6.signInUserSession);\n\t        }\n\t\n\t        var authenticationHelper = new _AuthenticationHelper2.default(_this6.pool.getUserPoolId().split('_')[1]);\n\t        authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey);\n\t\n\t        var deviceSecretVerifierConfig = {\n\t          Salt: new _awsSdk.util.Buffer(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n\t          PasswordVerifier: new _awsSdk.util.Buffer(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n\t        };\n\t\n\t        _this6.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n\t        _this6.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n\t        _this6.randomPassword = authenticationHelper.getRandomPassword();\n\t\n\t        _this6.client.makeUnauthenticatedRequest('confirmDevice', {\n\t          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n\t          AccessToken: _this6.signInUserSession.getAccessToken().getJwtToken(),\n\t          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n\t          DeviceName: navigator.userAgent\n\t        }, function (errConfirm, dataConfirm) {\n\t          if (errConfirm) {\n\t            return callback.onFailure(errConfirm);\n\t          }\n\t\n\t          _this6.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n\t          _this6.cacheDeviceKeyAndPassword();\n\t          if (dataConfirm.UserConfirmationNecessary === true) {\n\t            return callback.onSuccess(_this6.signInUserSession, dataConfirm.UserConfirmationNecessary);\n\t          }\n\t          return callback.onSuccess(_this6.signInUserSession);\n\t        });\n\t        return undefined;\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to change the current password\n\t     * @param {string} oldUserPassword The current password.\n\t     * @param {string} newUserPassword The requested new password.\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'changePassword',\n\t    value: function changePassword(oldUserPassword, newUserPassword, callback) {\n\t      if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('changePassword', {\n\t        PreviousPassword: oldUserPassword,\n\t        ProposedPassword: newUserPassword,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to enable MFA for himself\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'enableMFA',\n\t    value: function enableMFA(callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      var mfaOptions = [];\n\t      var mfaEnabled = {\n\t        DeliveryMedium: 'SMS',\n\t        AttributeName: 'phone_number'\n\t      };\n\t      mfaOptions.push(mfaEnabled);\n\t\n\t      this.client.makeUnauthenticatedRequest('setUserSettings', {\n\t        MFAOptions: mfaOptions,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to disable MFA for himself\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'disableMFA',\n\t    value: function disableMFA(callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      var mfaOptions = [];\n\t\n\t      this.client.makeUnauthenticatedRequest('setUserSettings', {\n\t        MFAOptions: mfaOptions,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to delete himself\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'deleteUser',\n\t    value: function deleteUser(callback) {\n\t      var _this7 = this;\n\t\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('deleteUser', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        _this7.clearCachedTokens();\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n\t     */\n\t    /**\n\t     * This is used by an authenticated user to change a list of attributes\n\t     * @param {AttributeArg[]} attributes A list of the new user attributes.\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'updateAttributes',\n\t    value: function updateAttributes(attributes, callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('updateUserAttributes', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        UserAttributes: attributes\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to get a list of attributes\n\t     * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'getUserAttributes',\n\t    value: function getUserAttributes(callback) {\n\t      if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('getUser', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err, userData) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t\n\t        var attributeList = [];\n\t\n\t        for (var i = 0; i < userData.UserAttributes.length; i++) {\n\t          var attribute = {\n\t            Name: userData.UserAttributes[i].Name,\n\t            Value: userData.UserAttributes[i].Value\n\t          };\n\t          var userAttribute = new _CognitoUserAttribute2.default(attribute);\n\t          attributeList.push(userAttribute);\n\t        }\n\t\n\t        return callback(null, attributeList);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to get the MFAOptions\n\t     * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'getMFAOptions',\n\t    value: function getMFAOptions(callback) {\n\t      if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('getUser', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err, userData) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t\n\t        return callback(null, userData.MFAOptions);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by an authenticated user to delete a list of attributes\n\t     * @param {string[]} attributeList Names of the attributes to delete.\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'deleteAttributes',\n\t    value: function deleteAttributes(attributeList, callback) {\n\t      if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n\t        return callback(new Error('User is not authenticated'), null);\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('deleteUserAttributes', {\n\t        UserAttributeNames: attributeList,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used by a user to resend a confirmation code\n\t     * @param {nodeCallback<string>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'resendConfirmationCode',\n\t    value: function resendConfirmationCode(callback) {\n\t      this.client.makeUnauthenticatedRequest('resendConfirmationCode', {\n\t        ClientId: this.pool.getClientId(),\n\t        Username: this.username\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t        return callback(null, 'SUCCESS');\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used to get a session, either from the session object\n\t     * or from  the local storage, or by using a refresh token\n\t     *\n\t     * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'getSession',\n\t    value: function getSession(callback) {\n\t      if (this.username == null) {\n\t        return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n\t      }\n\t\n\t      if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n\t        return callback(null, this.signInUserSession);\n\t      }\n\t\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId() + '.' + this.username;\n\t      var idTokenKey = keyPrefix + '.idToken';\n\t      var accessTokenKey = keyPrefix + '.accessToken';\n\t      var refreshTokenKey = keyPrefix + '.refreshToken';\n\t\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      if (storage.getItem(idTokenKey)) {\n\t        var idToken = new _CognitoIdToken2.default({\n\t          IdToken: storage.getItem(idTokenKey)\n\t        });\n\t        var accessToken = new _CognitoAccessToken2.default({\n\t          AccessToken: storage.getItem(accessTokenKey)\n\t        });\n\t        var refreshToken = new _CognitoRefreshToken2.default({\n\t          RefreshToken: storage.getItem(refreshTokenKey)\n\t        });\n\t\n\t        var sessionData = {\n\t          IdToken: idToken,\n\t          AccessToken: accessToken,\n\t          RefreshToken: refreshToken\n\t        };\n\t        var cachedSession = new _CognitoUserSession2.default(sessionData);\n\t        if (cachedSession.isValid()) {\n\t          this.signInUserSession = cachedSession;\n\t          return callback(null, this.signInUserSession);\n\t        }\n\t\n\t        if (refreshToken.getToken() == null) {\n\t          return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n\t        }\n\t\n\t        this.refreshSession(refreshToken, callback);\n\t      }\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This uses the refreshToken to retrieve a new session\n\t     * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n\t     * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'refreshSession',\n\t    value: function refreshSession(refreshToken, callback) {\n\t      var _this8 = this;\n\t\n\t      var authParameters = {};\n\t      authParameters.REFRESH_TOKEN = refreshToken.getToken();\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId();\n\t      var lastUserKey = keyPrefix + '.LastAuthUser';\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      if (storage.getItem(lastUserKey)) {\n\t        this.username = storage.getItem(lastUserKey);\n\t        var deviceKeyKey = keyPrefix + '.' + this.username + '.deviceKey';\n\t        this.deviceKey = storage.getItem(deviceKeyKey);\n\t        authParameters.DEVICE_KEY = this.deviceKey;\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('initiateAuth', {\n\t        ClientId: this.pool.getClientId(),\n\t        AuthFlow: 'REFRESH_TOKEN_AUTH',\n\t        AuthParameters: authParameters\n\t      }, function (err, authResult) {\n\t        if (err) {\n\t          if (err.code === 'NotAuthorizedException') {\n\t            _this8.clearCachedTokens();\n\t          }\n\t          return callback(err, null);\n\t        }\n\t        if (authResult) {\n\t          var authenticationResult = authResult.AuthenticationResult;\n\t          if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n\t            authenticationResult.RefreshToken = refreshToken.getToken();\n\t          }\n\t          _this8.signInUserSession = _this8.getCognitoUserSession(authenticationResult);\n\t          _this8.cacheTokens();\n\t          return callback(null, _this8.signInUserSession);\n\t        }\n\t        return undefined;\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used to save the session tokens to local storage\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'cacheTokens',\n\t    value: function cacheTokens() {\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId();\n\t      var idTokenKey = keyPrefix + '.' + this.username + '.idToken';\n\t      var accessTokenKey = keyPrefix + '.' + this.username + '.accessToken';\n\t      var refreshTokenKey = keyPrefix + '.' + this.username + '.refreshToken';\n\t      var lastUserKey = keyPrefix + '.LastAuthUser';\n\t\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n\t      storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n\t      storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n\t      storage.setItem(lastUserKey, this.username);\n\t    }\n\t\n\t    /**\n\t     * This is used to cache the device key and device group and device password\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'cacheDeviceKeyAndPassword',\n\t    value: function cacheDeviceKeyAndPassword() {\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId() + '.' + this.username;\n\t      var deviceKeyKey = keyPrefix + '.deviceKey';\n\t      var randomPasswordKey = keyPrefix + '.randomPasswordKey';\n\t      var deviceGroupKeyKey = keyPrefix + '.deviceGroupKey';\n\t\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      storage.setItem(deviceKeyKey, this.deviceKey);\n\t      storage.setItem(randomPasswordKey, this.randomPassword);\n\t      storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n\t    }\n\t\n\t    /**\n\t     * This is used to get current device key and device group and device password\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'getCachedDeviceKeyAndPassword',\n\t    value: function getCachedDeviceKeyAndPassword() {\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId() + '.' + this.username;\n\t      var deviceKeyKey = keyPrefix + '.deviceKey';\n\t      var randomPasswordKey = keyPrefix + '.randomPasswordKey';\n\t      var deviceGroupKeyKey = keyPrefix + '.deviceGroupKey';\n\t\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      if (storage.getItem(deviceKeyKey)) {\n\t        this.deviceKey = storage.getItem(deviceKeyKey);\n\t        this.randomPassword = storage.getItem(randomPasswordKey);\n\t        this.deviceGroupKey = storage.getItem(deviceGroupKeyKey);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * This is used to clear the device key info from local storage\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'clearCachedDeviceKeyAndPassword',\n\t    value: function clearCachedDeviceKeyAndPassword() {\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId() + '.' + this.username;\n\t      var deviceKeyKey = keyPrefix + '.deviceKey';\n\t      var randomPasswordKey = keyPrefix + '.randomPasswordKey';\n\t      var deviceGroupKeyKey = keyPrefix + '.deviceGroupKey';\n\t\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      storage.removeItem(deviceKeyKey);\n\t      storage.removeItem(randomPasswordKey);\n\t      storage.removeItem(deviceGroupKeyKey);\n\t    }\n\t\n\t    /**\n\t     * This is used to clear the session tokens from local storage\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'clearCachedTokens',\n\t    value: function clearCachedTokens() {\n\t      var keyPrefix = 'CognitoIdentityServiceProvider.' + this.pool.getClientId();\n\t      var idTokenKey = keyPrefix + '.' + this.username + '.idToken';\n\t      var accessTokenKey = keyPrefix + '.' + this.username + '.accessToken';\n\t      var refreshTokenKey = keyPrefix + '.' + this.username + '.refreshToken';\n\t      var lastUserKey = keyPrefix + '.LastAuthUser';\n\t\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      storage.removeItem(idTokenKey);\n\t      storage.removeItem(accessTokenKey);\n\t      storage.removeItem(refreshTokenKey);\n\t      storage.removeItem(lastUserKey);\n\t    }\n\t\n\t    /**\n\t     * This is used to build a user session from tokens retrieved in the authentication result\n\t     * @param {object} authResult Successful auth response from server.\n\t     * @returns {CognitoUserSession} The new user session.\n\t     * @private\n\t     */\n\t\n\t  }, {\n\t    key: 'getCognitoUserSession',\n\t    value: function getCognitoUserSession(authResult) {\n\t      var idToken = new _CognitoIdToken2.default(authResult);\n\t      var accessToken = new _CognitoAccessToken2.default(authResult);\n\t      var refreshToken = new _CognitoRefreshToken2.default(authResult);\n\t\n\t      var sessionData = {\n\t        IdToken: idToken,\n\t        AccessToken: accessToken,\n\t        RefreshToken: refreshToken\n\t      };\n\t\n\t      return new _CognitoUserSession2.default(sessionData);\n\t    }\n\t\n\t    /**\n\t     * This is used to initiate a forgot password request\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {inputVerificationCode?} callback.inputVerificationCode\n\t     *    Optional callback raised instead of onSuccess with response data.\n\t     * @param {onSuccess<void>?} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'forgotPassword',\n\t    value: function forgotPassword(callback) {\n\t      this.client.makeUnauthenticatedRequest('forgotPassword', {\n\t        ClientId: this.pool.getClientId(),\n\t        Username: this.username\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        if (typeof callback.inputVerificationCode === 'function') {\n\t          return callback.inputVerificationCode(data);\n\t        }\n\t        return callback.onSuccess();\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used to confirm a new password using a confirmationCode\n\t     * @param {string} confirmationCode Code entered by user.\n\t     * @param {string} newPassword Confirm new password.\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<void>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'confirmPassword',\n\t    value: function confirmPassword(confirmationCode, newPassword, callback) {\n\t      this.client.makeUnauthenticatedRequest('confirmForgotPassword', {\n\t        ClientId: this.pool.getClientId(),\n\t        Username: this.username,\n\t        ConfirmationCode: confirmationCode,\n\t        Password: newPassword\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess();\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used to initiate an attribute confirmation request\n\t     * @param {string} attributeName User attribute that needs confirmation.\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'getAttributeVerificationCode',\n\t    value: function getAttributeVerificationCode(attributeName, callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('getUserAttributeVerificationCode', {\n\t        AttributeName: attributeName,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.inputVerificationCode(data);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to confirm an attribute using a confirmation code\n\t     * @param {string} attributeName Attribute being confirmed.\n\t     * @param {string} confirmationCode Code entered by user.\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<string>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'verifyAttribute',\n\t    value: function verifyAttribute(attributeName, confirmationCode, callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('verifyUserAttribute', {\n\t        AttributeName: attributeName,\n\t        Code: confirmationCode,\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess('SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to get the device information using the current device key\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'getDevice',\n\t    value: function getDevice(callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('getDevice', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        DeviceKey: this.deviceKey\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess(data);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to forget a specific device\n\t     * @param {string} deviceKey Device key.\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<string>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'forgetSpecificDevice',\n\t    value: function forgetSpecificDevice(deviceKey, callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('forgetDevice', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        DeviceKey: deviceKey\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess('SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to forget the current device\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<string>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'forgetDevice',\n\t    value: function forgetDevice(callback) {\n\t      var _this9 = this;\n\t\n\t      this.forgetSpecificDevice(this.deviceKey, {\n\t        onFailure: callback.onFailure,\n\t        onSuccess: function onSuccess(result) {\n\t          _this9.deviceKey = null;\n\t          _this9.deviceGroupKey = null;\n\t          _this9.randomPassword = null;\n\t          _this9.clearCachedDeviceKeyAndPassword();\n\t          return callback.onSuccess(result);\n\t        }\n\t      });\n\t    }\n\t\n\t    /**\n\t     * This is used to set the device status as remembered\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<string>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'setDeviceStatusRemembered',\n\t    value: function setDeviceStatusRemembered(callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('updateDeviceStatus', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        DeviceKey: this.deviceKey,\n\t        DeviceRememberedStatus: 'remembered'\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess('SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to set the device status as not remembered\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<string>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'setDeviceStatusNotRemembered',\n\t    value: function setDeviceStatusNotRemembered(callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('updateDeviceStatus', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        DeviceKey: this.deviceKey,\n\t        DeviceRememberedStatus: 'not_remembered'\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess('SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to list all devices for a user\n\t     *\n\t     * @param {int} limit the number of devices returned in a call\n\t     * @param {string} paginationToken the pagination token in case any was returned before\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'listDevices',\n\t    value: function listDevices(limit, paginationToken, callback) {\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('listDevices', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n\t        Limit: limit,\n\t        PaginationToken: paginationToken\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        return callback.onSuccess(data);\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used to globally revoke all tokens issued to a user\n\t     * @param {object} callback Result callback map.\n\t     * @param {onFailure} callback.onFailure Called on any error.\n\t     * @param {onSuccess<string>} callback.onSuccess Called on success.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'globalSignOut',\n\t    value: function globalSignOut(callback) {\n\t      var _this10 = this;\n\t\n\t      if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n\t        return callback.onFailure(new Error('User is not authenticated'));\n\t      }\n\t\n\t      this.client.makeUnauthenticatedRequest('globalSignOut', {\n\t        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n\t      }, function (err) {\n\t        if (err) {\n\t          return callback.onFailure(err);\n\t        }\n\t        _this10.clearCachedTokens();\n\t        return callback.onSuccess('SUCCESS');\n\t      });\n\t      return undefined;\n\t    }\n\t\n\t    /**\n\t     * This is used for the user to signOut of the application and clear the cached tokens.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'signOut',\n\t    value: function signOut() {\n\t      this.signInUserSession = null;\n\t      this.clearCachedTokens();\n\t    }\n\t  }]);\n\t\n\t  return CognitoUser;\n\t}();\n\t\n\texports.default = CognitoUser;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\r\n\t * Copyright 2016 Amazon.com,\r\n\t * Inc. or its affiliates. All Rights Reserved.\r\n\t *\r\n\t * Licensed under the Amazon Software License (the \"License\").\r\n\t * You may not use this file except in compliance with the\r\n\t * License. A copy of the License is located at\r\n\t *\r\n\t *     http://aws.amazon.com/asl/\r\n\t *\r\n\t * or in the \"license\" file accompanying this file. This file is\r\n\t * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t * for the specific language governing permissions and\r\n\t * limitations under the License.\r\n\t */\n\t\n\t/** @class */\n\tvar CognitoUserAttribute = function () {\n\t  /**\r\n\t   * Constructs a new CognitoUserAttribute object\r\n\t   * @param {string=} Name The record's name\r\n\t   * @param {string=} Value The record's value\r\n\t   */\n\t  function CognitoUserAttribute() {\n\t    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t        Name = _ref.Name,\n\t        Value = _ref.Value;\n\t\n\t    _classCallCheck(this, CognitoUserAttribute);\n\t\n\t    this.Name = Name || '';\n\t    this.Value = Value || '';\n\t  }\n\t\n\t  /**\r\n\t   * @returns {string} the record's value.\r\n\t   */\n\t\n\t\n\t  _createClass(CognitoUserAttribute, [{\n\t    key: 'getValue',\n\t    value: function getValue() {\n\t      return this.Value;\n\t    }\n\t\n\t    /**\r\n\t     * Sets the record's value.\r\n\t     * @param {string} value The new value.\r\n\t     * @returns {CognitoUserAttribute} The record for method chaining.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'setValue',\n\t    value: function setValue(value) {\n\t      this.Value = value;\n\t      return this;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {string} the record's name.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getName',\n\t    value: function getName() {\n\t      return this.Name;\n\t    }\n\t\n\t    /**\r\n\t     * Sets the record's name\r\n\t     * @param {string} name The new name.\r\n\t     * @returns {CognitoUserAttribute} The record for method chaining.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'setName',\n\t    value: function setName(name) {\n\t      this.Name = name;\n\t      return this;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {string} a string representation of the record.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'toString',\n\t    value: function toString() {\n\t      return JSON.stringify(this);\n\t    }\n\t\n\t    /**\r\n\t     * @returns {object} a flat object representing the record.\r\n\t     */\n\t\n\t  }, {\n\t    key: 'toJSON',\n\t    value: function toJSON() {\n\t      return {\n\t        Name: this.Name,\n\t        Value: this.Value\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return CognitoUserAttribute;\n\t}();\n\t\n\texports.default = CognitoUserAttribute;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\r\n\t * Copyright 2016 Amazon.com,\r\n\t * Inc. or its affiliates. All Rights Reserved.\r\n\t *\r\n\t * Licensed under the Amazon Software License (the \"License\").\r\n\t * You may not use this file except in compliance with the\r\n\t * License. A copy of the License is located at\r\n\t *\r\n\t *     http://aws.amazon.com/asl/\r\n\t *\r\n\t * or in the \"license\" file accompanying this file. This file is\r\n\t * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t * for the specific language governing permissions and\r\n\t * limitations under the License.\r\n\t */\n\t\n\t/** @class */\n\tvar CognitoUserSession = function () {\n\t  /**\r\n\t   * Constructs a new CognitoUserSession object\r\n\t   * @param {string} IdToken The session's Id token.\r\n\t   * @param {string=} RefreshToken The session's refresh token.\r\n\t   * @param {string} AccessToken The session's access token.\r\n\t   */\n\t  function CognitoUserSession() {\n\t    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t        IdToken = _ref.IdToken,\n\t        RefreshToken = _ref.RefreshToken,\n\t        AccessToken = _ref.AccessToken;\n\t\n\t    _classCallCheck(this, CognitoUserSession);\n\t\n\t    if (AccessToken == null || IdToken == null) {\n\t      throw new Error('Id token and Access Token must be present.');\n\t    }\n\t\n\t    this.idToken = IdToken;\n\t    this.refreshToken = RefreshToken;\n\t    this.accessToken = AccessToken;\n\t  }\n\t\n\t  /**\r\n\t   * @returns {CognitoIdToken} the session's Id token\r\n\t   */\n\t\n\t\n\t  _createClass(CognitoUserSession, [{\n\t    key: 'getIdToken',\n\t    value: function getIdToken() {\n\t      return this.idToken;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {CognitoRefreshToken} the session's refresh token\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getRefreshToken',\n\t    value: function getRefreshToken() {\n\t      return this.refreshToken;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {CognitoAccessToken} the session's access token\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getAccessToken',\n\t    value: function getAccessToken() {\n\t      return this.accessToken;\n\t    }\n\t\n\t    /**\r\n\t     * Checks to see if the session is still valid based on session expiry information found\r\n\t     * in tokens and the current time\r\n\t     * @returns {boolean} if the session is still valid\r\n\t     */\n\t\n\t  }, {\n\t    key: 'isValid',\n\t    value: function isValid() {\n\t      var now = Math.floor(new Date() / 1000);\n\t\n\t      return now < this.accessToken.getExpiration() && now < this.idToken.getExpiration();\n\t    }\n\t  }]);\n\t\n\t  return CognitoUserSession;\n\t}();\n\t\n\texports.default = CognitoUserSession;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\r\n\t * Copyright 2016 Amazon.com,\r\n\t * Inc. or its affiliates. All Rights Reserved.\r\n\t *\r\n\t * Licensed under the Amazon Software License (the \"License\").\r\n\t * You may not use this file except in compliance with the\r\n\t * License. A copy of the License is located at\r\n\t *\r\n\t *     http://aws.amazon.com/asl/\r\n\t *\r\n\t * or in the \"license\" file accompanying this file. This file is\r\n\t * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t * for the specific language governing permissions and\r\n\t * limitations under the License.\r\n\t */\n\t\n\tvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\tvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\t\n\t/** @class */\n\t\n\tvar DateHelper = function () {\n\t    function DateHelper() {\n\t        _classCallCheck(this, DateHelper);\n\t    }\n\t\n\t    _createClass(DateHelper, [{\n\t        key: 'getNowString',\n\t\n\t        /**\r\n\t         * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\r\n\t         */\n\t        value: function getNowString() {\n\t            var now = new Date();\n\t\n\t            var weekDay = weekNames[now.getUTCDay()];\n\t            var month = monthNames[now.getUTCMonth()];\n\t            var day = now.getUTCDate();\n\t\n\t            var hours = now.getUTCHours();\n\t            if (hours < 10) {\n\t                hours = '0' + hours;\n\t            }\n\t\n\t            var minutes = now.getUTCMinutes();\n\t            if (minutes < 10) {\n\t                minutes = '0' + minutes;\n\t            }\n\t\n\t            var seconds = now.getUTCSeconds();\n\t            if (seconds < 10) {\n\t                seconds = '0' + seconds;\n\t            }\n\t\n\t            var year = now.getUTCFullYear();\n\t\n\t            // ddd MMM D HH:mm:ss UTC YYYY\n\t            var dateNow = weekDay + ' ' + month + ' ' + day + ' ' + hours + ':' + minutes + ':' + seconds + ' UTC ' + year;\n\t\n\t            return dateNow;\n\t        }\n\t    }]);\n\t\n\t    return DateHelper;\n\t}();\n\t\n\texports.default = DateHelper;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\r\n\t * Copyright 2016 Amazon.com,\r\n\t * Inc. or its affiliates. All Rights Reserved.\r\n\t *\r\n\t * Licensed under the Amazon Software License (the \"License\").\r\n\t * You may not use this file except in compliance with the\r\n\t * License. A copy of the License is located at\r\n\t *\r\n\t *     http://aws.amazon.com/asl/\r\n\t *\r\n\t * or in the \"license\" file accompanying this file. This file is\r\n\t * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t * for the specific language governing permissions and\r\n\t * limitations under the License.\r\n\t */\n\t\n\tvar dataMemory = {};\n\t\n\t/** @class */\n\t\n\tvar MemoryStorage = function () {\n\t  function MemoryStorage() {\n\t    _classCallCheck(this, MemoryStorage);\n\t  }\n\t\n\t  _createClass(MemoryStorage, null, [{\n\t    key: 'setItem',\n\t\n\t\n\t    /**\r\n\t     * This is used to set a specific item in storage\r\n\t     * @param {string} key - the key for the item\r\n\t     * @param {object} value - the value\r\n\t     * @returns {string} value that was set\r\n\t     */\n\t    value: function setItem(key, value) {\n\t      dataMemory[key] = value;\n\t      return dataMemory[key];\n\t    }\n\t\n\t    /**\r\n\t     * This is used to get a specific key from storage\r\n\t     * @param {string} key - the key for the item\r\n\t     * This is used to clear the storage\r\n\t     * @returns {string} the data item\r\n\t     */\n\t\n\t  }, {\n\t    key: 'getItem',\n\t    value: function getItem(key) {\n\t      return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n\t    }\n\t\n\t    /**\r\n\t     * This is used to remove an item from storage\r\n\t     * @param {string} key - the key being set\r\n\t     * @returns {string} value - value that was deleted\r\n\t     */\n\t\n\t  }, {\n\t    key: 'removeItem',\n\t    value: function removeItem(key) {\n\t      return delete dataMemory[key];\n\t    }\n\t\n\t    /**\r\n\t     * This is used to clear the storage\r\n\t     * @returns {string} nothing\r\n\t     */\n\t\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      dataMemory = {};\n\t      return dataMemory;\n\t    }\n\t  }]);\n\t\n\t  return MemoryStorage;\n\t}();\n\t\n\t/** @class */\n\t\n\t\n\tvar StorageHelper = function () {\n\t\n\t  /**\r\n\t   * This is used to get a storage object\r\n\t   * @returns {object} the storage\r\n\t   */\n\t  function StorageHelper() {\n\t    _classCallCheck(this, StorageHelper);\n\t\n\t    try {\n\t      this.storageWindow = window.sessionStorage;\n\t      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n\t      this.storageWindow.removeItem('aws.cognito.test-ls');\n\t    } catch (exception) {\n\t      this.storageWindow = MemoryStorage;\n\t    }\n\t  }\n\t\n\t  /**\r\n\t   * This is used to return the storage\r\n\t   * @returns {object} the storage\r\n\t   */\n\t\n\t\n\t  _createClass(StorageHelper, [{\n\t    key: 'getStorage',\n\t    value: function getStorage() {\n\t      return this.storageWindow;\n\t    }\n\t  }]);\n\t\n\t  return StorageHelper;\n\t}();\n\t\n\texports.default = StorageHelper;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*!\r\n\t * Copyright 2016 Amazon.com,\r\n\t * Inc. or its affiliates. All Rights Reserved.\r\n\t *\r\n\t * Licensed under the Amazon Software License (the \"License\").\r\n\t * You may not use this file except in compliance with the\r\n\t * License. A copy of the License is located at\r\n\t *\r\n\t *     http://aws.amazon.com/asl/\r\n\t *\r\n\t * or in the \"license\" file accompanying this file. This file is\r\n\t * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n\t * CONDITIONS OF ANY KIND, express or implied. See the License\r\n\t * for the specific language governing permissions and\r\n\t * limitations under the License.\r\n\t */\n\t\n\t/** @class */\n\tvar AuthenticationDetails = function () {\n\t  /**\r\n\t   * Constructs a new AuthenticationDetails object\r\n\t   * @param {object=} data Creation options.\r\n\t   * @param {string} data.Username User being authenticated.\r\n\t   * @param {string} data.Password Plain-text password to authenticate with.\r\n\t   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\r\n\t   */\n\t  function AuthenticationDetails(data) {\n\t    _classCallCheck(this, AuthenticationDetails);\n\t\n\t    var _ref = data || {},\n\t        ValidationData = _ref.ValidationData,\n\t        Username = _ref.Username,\n\t        Password = _ref.Password;\n\t\n\t    this.validationData = ValidationData || [];\n\t    this.username = Username;\n\t    this.password = Password;\n\t  }\n\t\n\t  /**\r\n\t   * @returns {string} the record's username\r\n\t   */\n\t\n\t\n\t  _createClass(AuthenticationDetails, [{\n\t    key: \"getUsername\",\n\t    value: function getUsername() {\n\t      return this.username;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {string} the record's password\r\n\t     */\n\t\n\t  }, {\n\t    key: \"getPassword\",\n\t    value: function getPassword() {\n\t      return this.password;\n\t    }\n\t\n\t    /**\r\n\t     * @returns {Array} the record's validationData\r\n\t     */\n\t\n\t  }, {\n\t    key: \"getValidationData\",\n\t    value: function getValidationData() {\n\t      return this.validationData;\n\t    }\n\t  }]);\n\t\n\t  return AuthenticationDetails;\n\t}();\n\t\n\texports.default = AuthenticationDetails;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*!\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2016 Amazon.com,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Inc. or its affiliates. All Rights Reserved.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed under the Amazon Software License (the \"License\").\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You may not use this file except in compliance with the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * License. A copy of the License is located at\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *     http://aws.amazon.com/asl/\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or in the \"license\" file accompanying this file. This file is\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * CONDITIONS OF ANY KIND, express or implied. See the License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * for the specific language governing permissions and\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * limitations under the License.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _awsSdk = __webpack_require__(1);\n\t\n\tvar _CognitoUser = __webpack_require__(6);\n\t\n\tvar _CognitoUser2 = _interopRequireDefault(_CognitoUser);\n\t\n\tvar _StorageHelper = __webpack_require__(10);\n\t\n\tvar _StorageHelper2 = _interopRequireDefault(_StorageHelper);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/** @class */\n\tvar CognitoUserPool = function () {\n\t  /**\n\t   * Constructs a new CognitoUserPool object\n\t   * @param {object} data Creation options.\n\t   * @param {string} data.UserPoolId Cognito user pool id.\n\t   * @param {string} data.ClientId User pool application client id.\n\t   */\n\t  function CognitoUserPool(data) {\n\t    _classCallCheck(this, CognitoUserPool);\n\t\n\t    var _ref = data || {},\n\t        UserPoolId = _ref.UserPoolId,\n\t        ClientId = _ref.ClientId;\n\t\n\t    if (!UserPoolId || !ClientId) {\n\t      throw new Error('Both UserPoolId and ClientId are required.');\n\t    }\n\t    if (!/^[\\w-]+_.+$/.test(UserPoolId)) {\n\t      throw new Error('Invalid UserPoolId format.');\n\t    }\n\t    var region = UserPoolId.split('_')[0];\n\t\n\t    this.userPoolId = UserPoolId;\n\t    this.clientId = ClientId;\n\t\n\t    this.client = new _awsSdk.CognitoIdentityServiceProvider({ apiVersion: '2016-04-19', region: region });\n\t  }\n\t\n\t  /**\n\t   * @returns {string} the user pool id\n\t   */\n\t\n\t\n\t  _createClass(CognitoUserPool, [{\n\t    key: 'getUserPoolId',\n\t    value: function getUserPoolId() {\n\t      return this.userPoolId;\n\t    }\n\t\n\t    /**\n\t     * @returns {string} the client id\n\t     */\n\t\n\t  }, {\n\t    key: 'getClientId',\n\t    value: function getClientId() {\n\t      return this.clientId;\n\t    }\n\t\n\t    /**\n\t     * @typedef {object} SignUpResult\n\t     * @property {CognitoUser} user New user.\n\t     * @property {bool} userConfirmed If the user is already confirmed.\n\t     */\n\t    /**\n\t     * method for signing up a user\n\t     * @param {string} username User's username.\n\t     * @param {string} password Plain-text initial password entered by user.\n\t     * @param {(AttributeArg[])=} userAttributes New user attributes.\n\t     * @param {(AttributeArg[])=} validationData Application metadata.\n\t     * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'signUp',\n\t    value: function signUp(username, password, userAttributes, validationData, callback) {\n\t      var _this = this;\n\t\n\t      this.client.makeUnauthenticatedRequest('signUp', {\n\t        ClientId: this.clientId,\n\t        Username: username,\n\t        Password: password,\n\t        UserAttributes: userAttributes,\n\t        ValidationData: validationData\n\t      }, function (err, data) {\n\t        if (err) {\n\t          return callback(err, null);\n\t        }\n\t\n\t        var cognitoUser = {\n\t          Username: username,\n\t          Pool: _this\n\t        };\n\t\n\t        var returnData = {\n\t          user: new _CognitoUser2.default(cognitoUser),\n\t          userConfirmed: data.UserConfirmed\n\t        };\n\t\n\t        return callback(null, returnData);\n\t      });\n\t    }\n\t\n\t    /**\n\t     * method for getting the current user of the application from the local storage\n\t     *\n\t     * @returns {CognitoUser} the user retrieved from storage\n\t     */\n\t\n\t  }, {\n\t    key: 'getCurrentUser',\n\t    value: function getCurrentUser() {\n\t      var lastUserKey = 'CognitoIdentityServiceProvider.' + this.clientId + '.LastAuthUser';\n\t      var storage = new _StorageHelper2.default().getStorage();\n\t\n\t      var lastAuthUser = storage.getItem(lastUserKey);\n\t      if (lastAuthUser) {\n\t        var cognitoUser = {\n\t          Username: lastAuthUser,\n\t          Pool: this\n\t        };\n\t\n\t        return new _CognitoUser2.default(cognitoUser);\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return CognitoUserPool;\n\t}();\n\t\n\texports.default = CognitoUserPool;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _AuthenticationDetails = __webpack_require__(12);\n\t\n\tObject.defineProperty(exports, 'AuthenticationDetails', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_AuthenticationDetails).default;\n\t  }\n\t});\n\t\n\tvar _AuthenticationHelper = __webpack_require__(2);\n\t\n\tObject.defineProperty(exports, 'AuthenticationHelper', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_AuthenticationHelper).default;\n\t  }\n\t});\n\t\n\tvar _CognitoAccessToken = __webpack_require__(3);\n\t\n\tObject.defineProperty(exports, 'CognitoAccessToken', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoAccessToken).default;\n\t  }\n\t});\n\t\n\tvar _CognitoIdToken = __webpack_require__(4);\n\t\n\tObject.defineProperty(exports, 'CognitoIdToken', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoIdToken).default;\n\t  }\n\t});\n\t\n\tvar _CognitoRefreshToken = __webpack_require__(5);\n\t\n\tObject.defineProperty(exports, 'CognitoRefreshToken', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoRefreshToken).default;\n\t  }\n\t});\n\t\n\tvar _CognitoUser = __webpack_require__(6);\n\t\n\tObject.defineProperty(exports, 'CognitoUser', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoUser).default;\n\t  }\n\t});\n\t\n\tvar _CognitoUserAttribute = __webpack_require__(7);\n\t\n\tObject.defineProperty(exports, 'CognitoUserAttribute', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoUserAttribute).default;\n\t  }\n\t});\n\t\n\tvar _CognitoUserPool = __webpack_require__(13);\n\t\n\tObject.defineProperty(exports, 'CognitoUserPool', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoUserPool).default;\n\t  }\n\t});\n\t\n\tvar _CognitoUserSession = __webpack_require__(8);\n\t\n\tObject.defineProperty(exports, 'CognitoUserSession', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_CognitoUserSession).default;\n\t  }\n\t});\n\t\n\tvar _DateHelper = __webpack_require__(9);\n\t\n\tObject.defineProperty(exports, 'DateHelper', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_DateHelper).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// amazon-cognito-identity.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 16353838a7c8e57b0141","import { CognitoIdentityServiceProvider } from 'aws-sdk';\r\nimport * as enhancements from './src';\r\n\r\nexport * from './src';\r\n\r\nObject.keys(enhancements).forEach(key => {\r\n  CognitoIdentityServiceProvider[key] = enhancements[key];\r\n});\r\n\r\n// The version of crypto-browserify included by aws-sdk only\r\n// checks for window.crypto, not window.msCrypto as used by\r\n// IE 11 – so we set it explicitly here\r\nif (typeof window !== 'undefined' && !window.crypto && window.msCrypto) {\r\n  window.crypto = window.msCrypto;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./enhance.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":[\"AWSCognito\"],\"commonjs2\":\"aws-sdk\",\"commonjs\":\"aws-sdk\",\"amd\":\"aws-sdk\"}\n// module id = 1\n// module chunks = 0","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { util } from 'aws-sdk';\r\nimport { BigInteger } from 'jsbn';\r\n\r\nconst initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1'\r\n  + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD'\r\n  + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245'\r\n  + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED'\r\n  + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D'\r\n  + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F'\r\n  + '83655D23DCA3AD961C62F356208552BB9ED529077096966D'\r\n  + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B'\r\n  + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9'\r\n  + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510'\r\n  + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64'\r\n  + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7'\r\n  + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B'\r\n  + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C'\r\n  + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31'\r\n  + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\r\n\r\nconst newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\r\n\r\n/** @class */\r\nexport default class AuthenticationHelper {\r\n  /**\r\n   * Constructs a new AuthenticationHelper object\r\n   * @param {string} PoolName Cognito user pool name.\r\n   */\r\n  constructor(PoolName) {\r\n    this.N = new BigInteger(initN, 16);\r\n    this.g = new BigInteger('2');\r\n    this.k = new BigInteger(this.hexHash(`00${this.N.toString(16)}0${this.g.toString(16)}`), 16);\r\n\r\n    this.smallAValue = this.generateRandomSmallA();\r\n    this.largeAValue = this.calculateA(this.smallAValue);\r\n\r\n    this.infoBits = new util.Buffer('Caldera Derived Key', 'utf8');\r\n\r\n    this.poolName = PoolName;\r\n  }\r\n\r\n  /**\r\n   * @returns {BigInteger} small A, a random number\r\n   */\r\n  getSmallAValue() {\r\n    return this.smallAValue;\r\n  }\r\n\r\n  /**\r\n   * @returns {BigInteger} large A, a value generated from small A\r\n   */\r\n  getLargeAValue() {\r\n    return this.largeAValue;\r\n  }\r\n\r\n  /**\r\n   * helper function to generate a random big integer\r\n   * @returns {BigInteger} a random value.\r\n   * @private\r\n   */\r\n  generateRandomSmallA() {\r\n    const hexRandom = util.crypto.lib.randomBytes(128).toString('hex');\r\n\r\n    const randomBigInt = new BigInteger(hexRandom, 16);\r\n    const smallABigInt = randomBigInt.mod(this.N);\r\n\r\n    return smallABigInt;\r\n  }\r\n\r\n  /**\r\n   * helper function to generate a random string\r\n   * @returns {string} a random value.\r\n   * @private\r\n   */\r\n  generateRandomString() {\r\n    return util.crypto.lib.randomBytes(40).toString('base64');\r\n  }\r\n\r\n  /**\r\n   * @returns {string} Generated random value included in password hash.\r\n   */\r\n  getRandomPassword() {\r\n    return this.randomPassword;\r\n  }\r\n\r\n  /**\r\n   * @returns {string} Generated random value included in devices hash.\r\n   */\r\n  getSaltDevices() {\r\n    return this.SaltToHashDevices;\r\n  }\r\n\r\n  /**\r\n   * @returns {string} Value used to verify devices.\r\n   */\r\n  getVerifierDevices() {\r\n    return this.verifierDevices;\r\n  }\r\n\r\n  /**\r\n   * Generate salts and compute verifier.\r\n   * @param {string} deviceGroupKey Devices to generate verifier for.\r\n   * @param {string} username User to generate verifier for.\r\n   * @returns {void}\r\n   */\r\n  generateHashDevice(deviceGroupKey, username) {\r\n    this.randomPassword = this.generateRandomString();\r\n    const combinedString = `${deviceGroupKey}${username}:${this.randomPassword}`;\r\n    const hashedString = this.hash(combinedString);\r\n\r\n    const hexRandom = util.crypto.lib.randomBytes(16).toString('hex');\r\n    this.SaltToHashDevices = this.padHex(new BigInteger(hexRandom, 16));\r\n\r\n    const verifierDevicesNotPadded = this.g.modPow(\r\n      new BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16),\r\n      this.N);\r\n\r\n    this.verifierDevices = this.padHex(verifierDevicesNotPadded);\r\n  }\r\n\r\n  /**\r\n   * Calculate the client's public value A = g^a%N\r\n   * with the generated random number a\r\n   * @param {BigInteger} a Randomly generated small A.\r\n   * @returns {BigInteger} Computed large A.\r\n   * @private\r\n   */\r\n  calculateA(a) {\r\n    const A = this.g.modPow(a, this.N);\r\n\r\n    if (A.mod(this.N).toString() === '0') {\r\n      throw new Error('Illegal paramater. A mod N cannot be 0.');\r\n    }\r\n    return A;\r\n  }\r\n\r\n  /**\r\n   * Calculate the client's value U which is the hash of A and B\r\n   * @param {BigInteger} A Large A value.\r\n   * @param {BigInteger} B Server B value.\r\n   * @returns {BigInteger} Computed U value.\r\n   * @private\r\n   */\r\n  calculateU(A, B) {\r\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\r\n    const finalU = new BigInteger(this.UHexHash, 16);\r\n\r\n    return finalU;\r\n  }\r\n\r\n  /**\r\n   * Calculate a hash from a bitArray\r\n   * @param {Buffer} buf Value to hash.\r\n   * @returns {String} Hex-encoded hash.\r\n   * @private\r\n   */\r\n  hash(buf) {\r\n    const hashHex = util.crypto.sha256(buf, 'hex');\r\n    return (new Array(64 - hashHex.length).join('0')) + hashHex;\r\n  }\r\n\r\n  /**\r\n   * Calculate a hash from a hex string\r\n   * @param {String} hexStr Value to hash.\r\n   * @returns {String} Hex-encoded hash.\r\n   * @private\r\n   */\r\n  hexHash(hexStr) {\r\n    return this.hash(new util.Buffer(hexStr, 'hex'));\r\n  }\r\n\r\n  /**\r\n   * Standard hkdf algorithm\r\n   * @param {Buffer} ikm Input key material.\r\n   * @param {Buffer} salt Salt value.\r\n   * @returns {Buffer} Strong key material.\r\n   * @private\r\n   */\r\n  computehkdf(ikm, salt) {\r\n    const prk = util.crypto.hmac(salt, ikm, 'buffer', 'sha256');\r\n    const infoBitsUpdate = util.buffer.concat([\r\n      this.infoBits,\r\n      new util.Buffer(String.fromCharCode(1), 'utf8'),\r\n    ]);\r\n    const hmac = util.crypto.hmac(prk, infoBitsUpdate, 'buffer', 'sha256');\r\n    return hmac.slice(0, 16);\r\n  }\r\n\r\n  /**\r\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\r\n   * @param {String} username Username.\r\n   * @param {String} password Password.\r\n   * @param {BigInteger} serverBValue Server B value.\r\n   * @param {BigInteger} salt Generated salt.\r\n   * @returns {Buffer} Computed HKDF value.\r\n   */\r\n  getPasswordAuthenticationKey(username, password, serverBValue, salt) {\r\n    if (serverBValue.mod(this.N).equals(new BigInteger('0', 16))) {\r\n      throw new Error('B cannot be zero.');\r\n    }\r\n\r\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\r\n\r\n    if (this.UValue.equals(new BigInteger('0', 16))) {\r\n      throw new Error('U cannot be zero.');\r\n    }\r\n\r\n    const usernamePassword = `${this.poolName}${username}:${password}`;\r\n    const usernamePasswordHash = this.hash(usernamePassword);\r\n\r\n    const xValue = new BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\r\n\r\n    const gModPowXN = this.g.modPow(xValue, this.N);\r\n    const intValue2 = serverBValue.subtract(this.k.multiply(gModPowXN));\r\n    const sValue = intValue2.modPow(\r\n      this.smallAValue.add(this.UValue.multiply(xValue)),\r\n      this.N\r\n    ).mod(this.N);\r\n\r\n    const hkdf = this.computehkdf(\r\n      new util.Buffer(this.padHex(sValue), 'hex'),\r\n      new util.Buffer(this.padHex(this.UHexHash), 'hex'));\r\n\r\n    return hkdf;\r\n  }\r\n\r\n  /**\r\n  * Return constant newPasswordRequiredChallengeUserAttributePrefix\r\n  * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\r\n  */\r\n  getNewPasswordRequiredChallengeUserAttributePrefix() {\r\n    return newPasswordRequiredChallengeUserAttributePrefix;\r\n  }\r\n\r\n  /**\r\n   * Converts a BigInteger (or hex string) to hex format padded with zeroes for hashing\r\n   * @param {BigInteger|String} Number or string to pad.\r\n   * @returns {String} Padded hex string.\r\n   */\r\n  padHex(bigInt) {\r\n    let hashStr = bigInt.toString(16);\r\n    if (hashStr.length % 2 === 1) {\r\n      hashStr = `0${hashStr}`;\r\n    } else if ('89ABCDEFabcdef'.indexOf(hashStr[0]) !== -1) {\r\n      hashStr = `00${hashStr}`;\r\n    }\r\n    return hashStr;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/AuthenticationHelper.js","/*\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { util } from 'aws-sdk';\r\n\r\n/** @class */\r\nexport default class CognitoAccessToken {\r\n  /**\r\n   * Constructs a new CognitoAccessToken object\r\n   * @param {string=} AccessToken The JWT access token.\r\n   */\r\n  constructor({ AccessToken } = {}) {\r\n    // Assign object\r\n    this.jwtToken = AccessToken || '';\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's token.\r\n   */\r\n  getJwtToken() {\r\n    return this.jwtToken;\r\n  }\r\n\r\n  /**\r\n   * @returns {int} the token's expiration (exp member).\r\n   */\r\n  getExpiration() {\r\n    const payload = this.jwtToken.split('.')[1];\r\n    const expiration = JSON.parse(util.base64.decode(payload).toString('utf8'));\r\n    return expiration.exp;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoAccessToken.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { util } from 'aws-sdk';\r\n\r\n/** @class */\r\nexport default class CognitoIdToken {\r\n  /**\r\n   * Constructs a new CognitoIdToken object\r\n   * @param {string=} IdToken The JWT Id token\r\n   */\r\n  constructor({ IdToken } = {}) {\r\n    // Assign object\r\n    this.jwtToken = IdToken || '';\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's token.\r\n   */\r\n  getJwtToken() {\r\n    return this.jwtToken;\r\n  }\r\n\r\n  /**\r\n   * @returns {int} the token's expiration (exp member).\r\n   */\r\n  getExpiration() {\r\n    const payload = this.jwtToken.split('.')[1];\r\n    const expiration = JSON.parse(util.base64.decode(payload).toString('utf8'));\r\n    return expiration.exp;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoIdToken.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/** @class */\r\nexport default class CognitoRefreshToken {\r\n  /**\r\n   * Constructs a new CognitoRefreshToken object\r\n   * @param {string=} RefreshToken The JWT refresh token.\r\n   */\r\n  constructor({ RefreshToken } = {}) {\r\n    // Assign object\r\n    this.token = RefreshToken || '';\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's token.\r\n   */\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoRefreshToken.js","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { util } from 'aws-sdk';\nimport { BigInteger } from 'jsbn';\n\nimport AuthenticationHelper from './AuthenticationHelper';\nimport CognitoAccessToken from './CognitoAccessToken';\nimport CognitoIdToken from './CognitoIdToken';\nimport CognitoRefreshToken from './CognitoRefreshToken';\nimport CognitoUserSession from './CognitoUserSession';\nimport DateHelper from './DateHelper';\nimport CognitoUserAttribute from './CognitoUserAttribute';\nimport StorageHelper from './StorageHelper';\n\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\n\n\n/** @class */\nexport default class CognitoUser {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   */\n  constructor(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and pool information are required.');\n    }\n\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n\n    this.client = data.Pool.client;\n\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n  }\n\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */\n  getSignInUserSession() {\n    return this.signInUserSession;\n  }\n\n  /**\n   * @returns {string} the user's username\n   */\n  getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {String} the authentication flow type\n   */\n  getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */\n  setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n\n  /**\n   * This is used for authenticating the user. it calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  authenticateUser(authDetails, callback) {\n    const authenticationHelper = new AuthenticationHelper(\n      this.pool.getUserPoolId().split('_')[1]);\n    const dateHelper = new DateHelper();\n\n    let serverBValue;\n    let salt;\n    const authParameters = {};\n\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n\n    authParameters.USERNAME = this.username;\n    authParameters.SRP_A = authenticationHelper.getLargeAValue().toString(16);\n\n    if (this.authenticationFlowType === 'CUSTOM_AUTH') {\n      authParameters.CHALLENGE_NAME = 'SRP_A';\n    }\n\n    this.client.makeUnauthenticatedRequest('initiateAuth', {\n      AuthFlow: this.authenticationFlowType,\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: authDetails.getValidationData(),\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      const challengeParameters = data.ChallengeParameters;\n\n      this.username = challengeParameters.USER_ID_FOR_SRP;\n      serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n      salt = new BigInteger(challengeParameters.SALT, 16);\n      this.getCachedDeviceKeyAndPassword();\n\n      const hkdf = authenticationHelper.getPasswordAuthenticationKey(\n        this.username,\n        authDetails.getPassword(),\n        serverBValue,\n        salt);\n\n      const dateNow = dateHelper.getNowString();\n\n      const signatureString = util.crypto.hmac(hkdf, util.buffer.concat([\n        new util.Buffer(this.pool.getUserPoolId().split('_')[1], 'utf8'),\n        new util.Buffer(this.username, 'utf8'),\n        new util.Buffer(challengeParameters.SECRET_BLOCK, 'base64'),\n        new util.Buffer(dateNow, 'utf8')\n      ]), 'base64', 'sha256')\n\n      const challengeResponses = {};\n\n      challengeResponses.USERNAME = this.username;\n      challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n      challengeResponses.TIMESTAMP = dateNow;\n      challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n\n      if (this.deviceKey != null) {\n        challengeResponses.DEVICE_KEY = this.deviceKey;\n      }\n\n      const respondToAuthChallenge = (challenge, challengeCallback) =>\n        this.client.makeUnauthenticatedRequest('respondToAuthChallenge', challenge,\n          (errChallenge, dataChallenge) => {\n            if (errChallenge && errChallenge.code === 'ResourceNotFoundException' &&\n                errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n              challengeResponses.DEVICE_KEY = null;\n              this.deviceKey = null;\n              this.randomPassword = null;\n              this.deviceGroupKey = null;\n              this.clearCachedDeviceKeyAndPassword();\n              return respondToAuthChallenge(challenge, challengeCallback);\n            }\n            return challengeCallback(errChallenge, dataChallenge);\n          });\n\n      respondToAuthChallenge({\n        ChallengeName: 'PASSWORD_VERIFIER',\n        ClientId: this.pool.getClientId(),\n        ChallengeResponses: challengeResponses,\n        Session: data.Session,\n      }, (errAuthenticate, dataAuthenticate) => {\n        if (errAuthenticate) {\n          return callback.onFailure(errAuthenticate);\n        }\n\n        const challengeName = dataAuthenticate.ChallengeName;\n        if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n          this.Session = dataAuthenticate.Session;\n          let userAttributes = null;\n          let rawRequiredAttributes = null;\n          const requiredAttributes = [];\n          const userAttributesPrefix = authenticationHelper\n            .getNewPasswordRequiredChallengeUserAttributePrefix();\n\n          if (dataAuthenticate.ChallengeParameters) {\n            userAttributes = JSON.parse(\n              dataAuthenticate.ChallengeParameters.userAttributes);\n            rawRequiredAttributes = JSON.parse(\n              dataAuthenticate.ChallengeParameters.requiredAttributes);\n          }\n\n          if (rawRequiredAttributes) {\n            for (let i = 0; i < rawRequiredAttributes.length; i++) {\n              requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n            }\n          }\n          return callback.newPasswordRequired(userAttributes, requiredAttributes);\n        }\n        return this.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n      });\n      return undefined;\n    });\n  }\n\n  /**\n  * PRIVATE ONLY: This is an internal only method and should not\n  * be directly called by the consumers.\n  * @param {object} dataAuthenticate authentication data\n  * @param {object} authenticationHelper helper created\n  * @param {callback} callback passed on from caller\n  * @returns {void}\n  */\n  authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    const challengeName = dataAuthenticate.ChallengeName;\n    const challengeParameters = dataAuthenticate.ChallengeParameters;\n\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.cacheTokens();\n\n    const newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n\n    authenticationHelper.generateHashDevice(\n      dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,\n      dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey);\n\n    const deviceSecretVerifierConfig = {\n      Salt: new util.Buffer(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n      PasswordVerifier: new util.Buffer(authenticationHelper.getVerifierDevices(), 'hex').toString('base64'),\n    };\n\n    this.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n    this.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n    this.randomPassword = authenticationHelper.getRandomPassword();\n\n    this.client.makeUnauthenticatedRequest('confirmDevice', {\n      DeviceKey: newDeviceMetadata.DeviceKey,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n      DeviceName: navigator.userAgent,\n    }, (errConfirm, dataConfirm) => {\n      if (errConfirm) {\n        return callback.onFailure(errConfirm);\n      }\n\n      this.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n      this.cacheDeviceKeyAndPassword();\n      if (dataConfirm.UserConfirmationNecessary === true) {\n        return callback.onSuccess(\n          this.signInUserSession, dataConfirm.UserConfirmationNecessary);\n      }\n      return callback.onSuccess(this.signInUserSession);\n    });\n    return undefined;\n  }\n\n  /**\n  * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n  * Pass the new password with any new user attributes to be updated.\n  * User attribute keys must be of format userAttributes.<attribute_name>.\n  * @param {string} newPassword new password for this user\n  * @param {object} requiredAttributeData map with values for all required attributes\n  * @param {object} callback Result callback map.\n  * @param {onFailure} callback.onFailure Called on any error.\n  * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n  * @param {customChallenge} callback.customChallenge Custom challenge\n  *         response required to continue.\n  * @param {authSuccess} callback.onSuccess Called on success with the new session.\n  * @returns {void}\n  */\n  completeNewPasswordChallenge(newPassword, requiredAttributeData, callback) {\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n    const authenticationHelper = new AuthenticationHelper(\n      this.pool.getUserPoolId().split('_')[1]);\n    const userAttributesPrefix = authenticationHelper\n      .getNewPasswordRequiredChallengeUserAttributePrefix();\n\n    const finalUserAttributes = {};\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach((key) => {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n    }, (errAuthenticate, dataAuthenticate) => {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n      return this.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   * @private\n   */\n  getDeviceResponse(callback) {\n    const authenticationHelper = new AuthenticationHelper(\n      this.deviceGroupKey);\n    const dateHelper = new DateHelper();\n\n    const authParameters = {};\n\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authParameters.SRP_A = authenticationHelper.getLargeAValue().toString(16);\n\n    this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n      ChallengeName: 'DEVICE_SRP_AUTH',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: authParameters,\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      const challengeParameters = data.ChallengeParameters;\n\n      const serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n      const salt = new BigInteger(challengeParameters.SALT, 16);\n\n      const hkdf = authenticationHelper.getPasswordAuthenticationKey(\n        this.deviceKey,\n        this.randomPassword,\n        serverBValue,\n        salt);\n\n      const dateNow = dateHelper.getNowString();\n\n      const signatureString = util.crypto.hmac(hkdf, util.buffer.concat([\n        new util.Buffer(this.deviceGroupKey, 'utf8'),\n        new util.Buffer(this.deviceKey, 'utf8'),\n        new util.Buffer(challengeParameters.SECRET_BLOCK, 'base64'),\n        new util.Buffer(dateNow, 'utf8')\n      ]), 'base64', 'sha256')\n\n      const challengeResponses = {};\n\n      challengeResponses.USERNAME = this.username;\n      challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n      challengeResponses.TIMESTAMP = dateNow;\n      challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n\n      this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n        ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n        ClientId: this.pool.getClientId(),\n        ChallengeResponses: challengeResponses,\n        Session: data.Session,\n      }, (errAuthenticate, dataAuthenticate) => {\n        if (errAuthenticate) {\n          return callback.onFailure(errAuthenticate);\n        }\n\n        this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n        this.cacheTokens();\n\n        return callback.onSuccess(this.signInUserSession);\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  confirmRegistration(confirmationCode, forceAliasCreation, callback) {\n    this.client.makeUnauthenticatedRequest('confirmSignUp', {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challange answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  sendCustomChallengeAnswer(answerChallenge, callback) {\n    const challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n\n    this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      const challengeName = data.ChallengeName;\n\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        this.Session = data.Session;\n        return callback.customChallenge(data.ChallengeParameters);\n      }\n\n      this.signInUserSession = this.getCognitoUserSession(data.AuthenticationResult);\n      this.cacheTokens();\n      return callback.onSuccess(this.signInUserSession);\n    });\n  }\n\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  sendMFACode(confirmationCode, callback) {\n    const challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n\n    this.client.makeUnauthenticatedRequest('respondToAuthChallenge', {\n      ChallengeName: 'SMS_MFA',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n    }, (err, dataAuthenticate) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      const challengeName = dataAuthenticate.ChallengeName;\n\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        this.getDeviceResponse(callback);\n        return undefined;\n      }\n\n      this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n      this.cacheTokens();\n\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(this.signInUserSession);\n      }\n\n      const authenticationHelper = new AuthenticationHelper(\n        this.pool.getUserPoolId().split('_')[1]);\n      authenticationHelper.generateHashDevice(\n        dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,\n        dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey);\n\n      const deviceSecretVerifierConfig = {\n        Salt: new util.Buffer(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: new util.Buffer(authenticationHelper.getVerifierDevices(), 'hex').toString('base64'),\n      };\n\n      this.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      this.deviceGroupKey = dataAuthenticate.AuthenticationResult\n        .NewDeviceMetadata.DeviceGroupKey;\n      this.randomPassword = authenticationHelper.getRandomPassword();\n\n      this.client.makeUnauthenticatedRequest('confirmDevice', {\n        DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: navigator.userAgent,\n      }, (errConfirm, dataConfirm) => {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n\n        this.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n        this.cacheDeviceKeyAndPassword();\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(\n            this.signInUserSession,\n            dataConfirm.UserConfirmationNecessary);\n        }\n        return callback.onSuccess(this.signInUserSession);\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  changePassword(oldUserPassword, newUserPassword, callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.makeUnauthenticatedRequest('changePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for himself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    const mfaOptions = [];\n    const mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number',\n    };\n    mfaOptions.push(mfaEnabled);\n\n    this.client.makeUnauthenticatedRequest('setUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to disable MFA for himself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    const mfaOptions = [];\n\n    this.client.makeUnauthenticatedRequest('setUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n\n  /**\n   * This is used by an authenticated user to delete himself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  deleteUser(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.makeUnauthenticatedRequest('deleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      this.clearCachedTokens();\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  updateAttributes(attributes, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.makeUnauthenticatedRequest('updateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */\n  getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.makeUnauthenticatedRequest('getUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, (err, userData) => {\n      if (err) {\n        return callback(err, null);\n      }\n\n      const attributeList = [];\n\n      for (let i = 0; i < userData.UserAttributes.length; i++) {\n        const attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value,\n        };\n        const userAttribute = new CognitoUserAttribute(attribute);\n        attributeList.push(userAttribute);\n      }\n\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get the MFAOptions\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */\n  getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.makeUnauthenticatedRequest('getUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, (err, userData) => {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  deleteAttributes(attributeList, callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.makeUnauthenticatedRequest('deleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  resendConfirmationCode(callback) {\n    this.client.makeUnauthenticatedRequest('resendConfirmationCode', {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n    }, err => {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @returns {void}\n   */\n  getSession(callback) {\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}.${this.username}`;\n    const idTokenKey = `${keyPrefix}.idToken`;\n    const accessTokenKey = `${keyPrefix}.accessToken`;\n    const refreshTokenKey = `${keyPrefix}.refreshToken`;\n\n    const storage = new StorageHelper().getStorage();\n\n    if (storage.getItem(idTokenKey)) {\n      const idToken = new CognitoIdToken({\n        IdToken: storage.getItem(idTokenKey),\n      });\n      const accessToken = new CognitoAccessToken({\n        AccessToken: storage.getItem(accessTokenKey),\n      });\n      const refreshToken = new CognitoRefreshToken({\n        RefreshToken: storage.getItem(refreshTokenKey),\n      });\n\n      const sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n      };\n      const cachedSession = new CognitoUserSession(sessionData);\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n\n      if (refreshToken.getToken() == null) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n\n      this.refreshSession(refreshToken, callback);\n    }\n    return undefined;\n  }\n\n\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @returns {void}\n   */\n  refreshSession(refreshToken, callback) {\n    const authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}`;\n    const lastUserKey = `${keyPrefix}.LastAuthUser`;\n    const storage = new StorageHelper().getStorage();\n\n    if (storage.getItem(lastUserKey)) {\n      this.username = storage.getItem(lastUserKey);\n      const deviceKeyKey = `${keyPrefix}.${this.username}.deviceKey`;\n      this.deviceKey = storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n\n    this.client.makeUnauthenticatedRequest('initiateAuth', {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n    }, (err, authResult) => {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          this.clearCachedTokens();\n        }\n        return callback(err, null);\n      }\n      if (authResult) {\n        const authenticationResult = authResult.AuthenticationResult;\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n        this.signInUserSession = this.getCognitoUserSession(authenticationResult);\n        this.cacheTokens();\n        return callback(null, this.signInUserSession);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */\n  cacheTokens() {\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}`;\n    const idTokenKey = `${keyPrefix}.${this.username}.idToken`;\n    const accessTokenKey = `${keyPrefix}.${this.username}.accessToken`;\n    const refreshTokenKey = `${keyPrefix}.${this.username}.refreshToken`;\n    const lastUserKey = `${keyPrefix}.LastAuthUser`;\n\n    const storage = new StorageHelper().getStorage();\n\n    storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    storage.setItem(lastUserKey, this.username);\n  }\n\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */\n  cacheDeviceKeyAndPassword() {\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}.${this.username}`;\n    const deviceKeyKey = `${keyPrefix}.deviceKey`;\n    const randomPasswordKey = `${keyPrefix}.randomPasswordKey`;\n    const deviceGroupKeyKey = `${keyPrefix}.deviceGroupKey`;\n\n    const storage = new StorageHelper().getStorage();\n\n    storage.setItem(deviceKeyKey, this.deviceKey);\n    storage.setItem(randomPasswordKey, this.randomPassword);\n    storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */\n  getCachedDeviceKeyAndPassword() {\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}.${this.username}`;\n    const deviceKeyKey = `${keyPrefix}.deviceKey`;\n    const randomPasswordKey = `${keyPrefix}.randomPasswordKey`;\n    const deviceGroupKeyKey = `${keyPrefix}.deviceGroupKey`;\n\n    const storage = new StorageHelper().getStorage();\n\n    if (storage.getItem(deviceKeyKey)) {\n      this.deviceKey = storage.getItem(deviceKeyKey);\n      this.randomPassword = storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = storage.getItem(deviceGroupKeyKey);\n    }\n  }\n\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */\n  clearCachedDeviceKeyAndPassword() {\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}.${this.username}`;\n    const deviceKeyKey = `${keyPrefix}.deviceKey`;\n    const randomPasswordKey = `${keyPrefix}.randomPasswordKey`;\n    const deviceGroupKeyKey = `${keyPrefix}.deviceGroupKey`;\n\n    const storage = new StorageHelper().getStorage();\n\n    storage.removeItem(deviceKeyKey);\n    storage.removeItem(randomPasswordKey);\n    storage.removeItem(deviceGroupKeyKey);\n  }\n\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */\n  clearCachedTokens() {\n    const keyPrefix = `CognitoIdentityServiceProvider.${this.pool.getClientId()}`;\n    const idTokenKey = `${keyPrefix}.${this.username}.idToken`;\n    const accessTokenKey = `${keyPrefix}.${this.username}.accessToken`;\n    const refreshTokenKey = `${keyPrefix}.${this.username}.refreshToken`;\n    const lastUserKey = `${keyPrefix}.LastAuthUser`;\n\n    const storage = new StorageHelper().getStorage();\n\n    storage.removeItem(idTokenKey);\n    storage.removeItem(accessTokenKey);\n    storage.removeItem(refreshTokenKey);\n    storage.removeItem(lastUserKey);\n  }\n\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */\n  getCognitoUserSession(authResult) {\n    const idToken = new CognitoIdToken(authResult);\n    const accessToken = new CognitoAccessToken(authResult);\n    const refreshToken = new CognitoRefreshToken(authResult);\n\n    const sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken,\n    };\n\n    return new CognitoUserSession(sessionData);\n  }\n\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess<void>?} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  forgotPassword(callback) {\n    this.client.makeUnauthenticatedRequest('forgotPassword', {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess();\n    });\n  }\n\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  confirmPassword(confirmationCode, newPassword, callback) {\n    this.client.makeUnauthenticatedRequest('confirmForgotPassword', {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n    }, err => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess();\n    });\n  }\n\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @returns {void}\n   */\n  getAttributeVerificationCode(attributeName, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('getUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.inputVerificationCode(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('verifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */\n  getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('getDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('forgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey,\n    }, err => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  forgetDevice(callback) {\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: result => {\n        this.deviceKey = null;\n        this.deviceGroupKey = null;\n        this.randomPassword = null;\n        this.clearCachedDeviceKeyAndPassword();\n        return callback.onSuccess(result);\n      },\n    });\n  }\n\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('updateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered',\n    }, err => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('updateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered',\n    }, err => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */\n  listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('listDevices', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit,\n      PaginationToken: paginationToken,\n    }, (err, data) => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  globalSignOut(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.makeUnauthenticatedRequest('globalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n    }, err => {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      this.clearCachedTokens();\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */\n  signOut() {\n    this.signInUserSession = null;\n    this.clearCachedTokens();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoUser.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/** @class */\r\nexport default class CognitoUserAttribute {\r\n  /**\r\n   * Constructs a new CognitoUserAttribute object\r\n   * @param {string=} Name The record's name\r\n   * @param {string=} Value The record's value\r\n   */\r\n  constructor({ Name, Value } = {}) {\r\n    this.Name = Name || '';\r\n    this.Value = Value || '';\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's value.\r\n   */\r\n  getValue() {\r\n    return this.Value;\r\n  }\r\n\r\n  /**\r\n   * Sets the record's value.\r\n   * @param {string} value The new value.\r\n   * @returns {CognitoUserAttribute} The record for method chaining.\r\n   */\r\n  setValue(value) {\r\n    this.Value = value;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's name.\r\n   */\r\n  getName() {\r\n    return this.Name;\r\n  }\r\n\r\n  /**\r\n   * Sets the record's name\r\n   * @param {string} name The new name.\r\n   * @returns {CognitoUserAttribute} The record for method chaining.\r\n   */\r\n  setName(name) {\r\n    this.Name = name;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {string} a string representation of the record.\r\n   */\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  /**\r\n   * @returns {object} a flat object representing the record.\r\n   */\r\n  toJSON() {\r\n    return {\r\n      Name: this.Name,\r\n      Value: this.Value,\r\n    };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoUserAttribute.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/** @class */\r\nexport default class CognitoUserSession {\r\n  /**\r\n   * Constructs a new CognitoUserSession object\r\n   * @param {string} IdToken The session's Id token.\r\n   * @param {string=} RefreshToken The session's refresh token.\r\n   * @param {string} AccessToken The session's access token.\r\n   */\r\n  constructor({ IdToken, RefreshToken, AccessToken } = {}) {\r\n    if (AccessToken == null || IdToken == null) {\r\n      throw new Error('Id token and Access Token must be present.');\r\n    }\r\n\r\n    this.idToken = IdToken;\r\n    this.refreshToken = RefreshToken;\r\n    this.accessToken = AccessToken;\r\n  }\r\n\r\n  /**\r\n   * @returns {CognitoIdToken} the session's Id token\r\n   */\r\n  getIdToken() {\r\n    return this.idToken;\r\n  }\r\n\r\n  /**\r\n   * @returns {CognitoRefreshToken} the session's refresh token\r\n   */\r\n  getRefreshToken() {\r\n    return this.refreshToken;\r\n  }\r\n\r\n  /**\r\n   * @returns {CognitoAccessToken} the session's access token\r\n   */\r\n  getAccessToken() {\r\n    return this.accessToken;\r\n  }\r\n\r\n  /**\r\n   * Checks to see if the session is still valid based on session expiry information found\r\n   * in tokens and the current time\r\n   * @returns {boolean} if the session is still valid\r\n   */\r\n  isValid() {\r\n    const now = Math.floor(new Date() / 1000);\r\n\r\n    return now < this.accessToken.getExpiration() && now < this.idToken.getExpiration();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoUserSession.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst monthNames =\r\n  ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\nconst weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n/** @class */\r\nexport default class DateHelper {\r\n  /**\r\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\r\n   */\r\n  getNowString() {\r\n    const now = new Date();\r\n\r\n    const weekDay = weekNames[now.getUTCDay()];\r\n    const month = monthNames[now.getUTCMonth()];\r\n    const day = now.getUTCDate();\r\n\r\n    let hours = now.getUTCHours();\r\n    if (hours < 10) {\r\n      hours = `0${hours}`;\r\n    }\r\n\r\n    let minutes = now.getUTCMinutes();\r\n    if (minutes < 10) {\r\n      minutes = `0${minutes}`;\r\n    }\r\n\r\n    let seconds = now.getUTCSeconds();\r\n    if (seconds < 10) {\r\n      seconds = `0${seconds}`;\r\n    }\r\n\r\n    const year = now.getUTCFullYear();\r\n\r\n    // ddd MMM D HH:mm:ss UTC YYYY\r\n    const dateNow = `${weekDay} ${month} ${day} ${hours}:${minutes}:${seconds} UTC ${year}`;\r\n\r\n    return dateNow;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/DateHelper.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nlet dataMemory = {};\r\n\r\n/** @class */\r\nclass MemoryStorage {\r\n\r\n  /**\r\n   * This is used to set a specific item in storage\r\n   * @param {string} key - the key for the item\r\n   * @param {object} value - the value\r\n   * @returns {string} value that was set\r\n   */\r\n  static setItem(key, value) {\r\n    dataMemory[key] = value;\r\n    return dataMemory[key];\r\n  }\r\n\r\n  /**\r\n   * This is used to get a specific key from storage\r\n   * @param {string} key - the key for the item\r\n   * This is used to clear the storage\r\n   * @returns {string} the data item\r\n   */\r\n  static getItem(key) {\r\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\r\n  }\r\n\r\n  /**\r\n   * This is used to remove an item from storage\r\n   * @param {string} key - the key being set\r\n   * @returns {string} value - value that was deleted\r\n   */\r\n  static removeItem(key) {\r\n    return delete dataMemory[key];\r\n  }\r\n\r\n  /**\r\n   * This is used to clear the storage\r\n   * @returns {string} nothing\r\n   */\r\n  static clear() {\r\n    dataMemory = {};\r\n    return dataMemory;\r\n  }\r\n}\r\n\r\n/** @class */\r\nexport default class StorageHelper {\r\n\r\n  /**\r\n   * This is used to get a storage object\r\n   * @returns {object} the storage\r\n   */\r\n  constructor() {\r\n    try {\r\n      this.storageWindow = window.sessionStorage;\r\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\r\n      this.storageWindow.removeItem('aws.cognito.test-ls');\r\n    } catch (exception) {\r\n      this.storageWindow = MemoryStorage;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This is used to return the storage\r\n   * @returns {object} the storage\r\n   */\r\n  getStorage() {\r\n    return this.storageWindow;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/StorageHelper.js","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":[],\"commonjs2\":\"jsbn\",\"commonjs\":\"jsbn\",\"amd\":\"jsbn\"}\n// module id = 11\n// module chunks = 0","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/** @class */\r\nexport default class AuthenticationDetails {\r\n  /**\r\n   * Constructs a new AuthenticationDetails object\r\n   * @param {object=} data Creation options.\r\n   * @param {string} data.Username User being authenticated.\r\n   * @param {string} data.Password Plain-text password to authenticate with.\r\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\r\n   */\r\n  constructor(data) {\r\n    const { ValidationData, Username, Password } = data || {};\r\n    this.validationData = ValidationData || [];\r\n    this.username = Username;\r\n    this.password = Password;\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's username\r\n   */\r\n  getUsername() {\r\n    return this.username;\r\n  }\r\n\r\n  /**\r\n   * @returns {string} the record's password\r\n   */\r\n  getPassword() {\r\n    return this.password;\r\n  }\r\n\r\n  /**\r\n   * @returns {Array} the record's validationData\r\n   */\r\n  getValidationData() {\r\n    return this.validationData;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/AuthenticationDetails.js","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CognitoIdentityServiceProvider } from 'aws-sdk';\n\nimport CognitoUser from './CognitoUser';\nimport StorageHelper from './StorageHelper';\n\n/** @class */\nexport default class CognitoUserPool {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   */\n  constructor(data) {\n    const { UserPoolId, ClientId } = data || {};\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n    if (!/^[\\w-]+_.+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n    const region = UserPoolId.split('_')[0];\n\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n\n    this.client = new CognitoIdentityServiceProvider({ apiVersion: '2016-04-19', region });\n  }\n\n  /**\n   * @returns {string} the user pool id\n   */\n  getUserPoolId() {\n    return this.userPoolId;\n  }\n\n  /**\n   * @returns {string} the client id\n   */\n  getClientId() {\n    return this.clientId;\n  }\n\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @returns {void}\n   */\n  signUp(username, password, userAttributes, validationData, callback) {\n    this.client.makeUnauthenticatedRequest('signUp', {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n    }, (err, data) => {\n      if (err) {\n        return callback(err, null);\n      }\n\n      const cognitoUser = {\n        Username: username,\n        Pool: this,\n      };\n\n      const returnData = {\n        user: new CognitoUser(cognitoUser),\n        userConfirmed: data.UserConfirmed,\n      };\n\n      return callback(null, returnData);\n    });\n  }\n\n\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */\n  getCurrentUser() {\n    const lastUserKey = `CognitoIdentityServiceProvider.${this.clientId}.LastAuthUser`;\n    const storage = new StorageHelper().getStorage();\n\n    const lastAuthUser = storage.getItem(lastUserKey);\n    if (lastAuthUser) {\n      const cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n      };\n\n      return new CognitoUser(cognitoUser);\n    }\n\n    return null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/CognitoUserPool.js","/*!\r\n * Copyright 2016 Amazon.com,\r\n * Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Amazon Software License (the \"License\").\r\n * You may not use this file except in compliance with the\r\n * License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/asl/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is\r\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, express or implied. See the License\r\n * for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport { default as AuthenticationDetails } from './AuthenticationDetails';\r\nexport { default as AuthenticationHelper } from './AuthenticationHelper';\r\nexport { default as CognitoAccessToken } from './CognitoAccessToken';\r\nexport { default as CognitoIdToken } from './CognitoIdToken';\r\nexport { default as CognitoRefreshToken } from './CognitoRefreshToken';\r\nexport { default as CognitoUser } from './CognitoUser';\r\nexport { default as CognitoUserAttribute } from './CognitoUserAttribute';\r\nexport { default as CognitoUserPool } from './CognitoUserPool';\r\nexport { default as CognitoUserSession } from './CognitoUserSession';\r\nexport { default as DateHelper } from './DateHelper';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}